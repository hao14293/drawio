# 感知服务详细设计文档

感知服务包含人、车、结构化、步态相关业务

<img src="C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240717090237595.png" alt="image-20240717090237595" style="zoom: 200%;" />

| **业务类型**   | **主要功能**                                                 |
| -------------- | ------------------------------------------------------------ |
| 人脸智能业务   | 注册库管理、库成员管理、实时图片流分析、布控管理、以图搜图、1V1比对、NVN库碰撞比对 |
| 车辆智能业务   | 实时图片流分析、以图搜图                                     |
| 结构化智能业务 | 实时图片流分析、实时视频流分析、录像分析、预案任务分析、以图搜图 |
| 步态业务       | 注册库管理、库成员管理、实时视频流分析、实时图片流分析、录像分析、布控管理、以图搜图 |
| 事件业务       | 实时视频流分析、实时图片流分析、录像分析误报库管理           |



| **服务名称**             | **服务简介**                                                 | **Git****仓库名称**     | **技术栈** | **主要负责人**   |
| ------------------------ | ------------------------------------------------------------ | ----------------------- | ---------- | ---------------- |
| CVEngine-Business        | 网关服务：北向统一对各服务平台提供https服务，转发至内部其他业务服务模块 | **CVEngine-gateway**    | go         | 饶平             |
| CVEngine-Maintainer      | 配置中心：管理和分发视图智能集群中各服务的配置信息  注册中心：管理集群中各服务信息；集群各服务向注册中心注册本服务信息，订阅所依赖服务的信息 | **maintainer**          | java       | 赵晨时、曹敏     |
| CVEngine-ResourceManager | 资源管理模块：管理智能算力资源，包括硬件资源和智能算子资源   | **ResourceManager**     | java       | 赵晨时、曹敏     |
| CVEngine-MPlatform       | 中台（算法仓库）服务：管理算法包、算子包、算法、智能网络资源等信息 | **CVEngine-library**    | java       | 张广领、孟红全   |
| CVEngine-Perception      | 感知服务：对外提供人脸智能业务、车辆智能业务、结构化智能、步态智能业务服务 | **CVEngine-Perception** | java       | 赵晨时、曹敏     |
| CVEngine-Cognition       | 认知服务：对外提供事件智能业务服务、大模型智能业务服务       | **CVEngine-cognition**  | java       | 吴林俊、黄强     |
| CVEngine-Actuator        | 智能运维服务：面向技术支持快速排查问题，针对集群内各类日志、异常及数据关系做运维展示 | **CVEngine-Actuator**   | java       | 曹敏             |
| CVEngine-Executor        | 数据级联服务：分发流转各类智能相关数据，如将已开启分析的抓拍数据分发给具有对应智能分析能力的算子 | Executor                | go         | 饶平、建辉、广领 |
| CVEngine-Agent           | 调度子节点服务：收集硬件信息上报给资源管理服务；管理智能算子进程 | Agent                   | java       | 赵晨时           |
| CVEngine-Feature         | 特征存储服务：存储特征值及注册库图片；也可临时存储抓拍库图片 | pf                      | java       | 董雨轩、方彪     |
| CVEngine-Redis           | 目前存储了图搜结果信息、静态库分片信息及一些智能运维所需数据 |                         | 开源       | 万光宝           |
| 公共脚本                 | 安装部署、升级等功能的公共脚本                               | cvengine-tool           | shell      | 庄建辉           |



# 总体工程设计

![image-20240717090449871](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240717090449871.png)

Deploy为启动模块

Common 模块为所有模块的公共依赖部分

DataBase模块为sql相关

Ha 模块为主备

Rpc模块为grpc相关

Core模块为人车结构化步态公共业务模块

其余功能模块分为api部分与Service 部分，便于后期拆解转换为dubbo



## Deploy模块

### 鉴权修改

感知服务不再实现鉴权功能，但是仍然需要获取ak sk uid等用户信息。 此功能改为通过business 网关服务获取。
  具体实现可参看AuthInfoAop，直接从网关转发的请求头中获取。

```
/**
 *  Perception的鉴权 没有用MaintainerClient 中的接口，所以配置中都为false
 *  自己在Aop中实现了新的鉴权逻辑,因为网关已经比较了认证信息了，这里没有必要再生成与比较一次
 *
 *  但是还是留一个后门配置，可以关闭鉴权，即允许请求不带ak sk uid信息
 */
```



```java
// AuthInfoAop.java
使用Spring AOP（Aspect Oriented Programming，面向切面编程）来实现一个权限验证的切面（Aspect）。

@Aspect // 标记此类为一个切面，用于横切关注点的模块化，如日志、事务、权限验证等。
@Order(value = 100) // 定义此切面的优先级，数值越小优先级越高。在有多个切面时，决定它们的执行顺序。
@Component // 将此类声明为Spring容器管理的组件，使得切面可以被自动识别和加载。
@Slf4j 
public class AuthInfoAop {

    @Autowired 
    private AuthInfoImpl authInfoImpl;
    @Autowired 
    private CommonProperties commonProperties;

    // 定义一个切点（Pointcut），指定此切面将作用于哪些方法上。
    @Pointcut("execution(* com.dahuatech.cvengine.perception.*.controller..*(..)) " + // 
            "&& !execution(* com.dahuatech.cvengine.perception.support.controller.RepositoryRedistributeController.*(..))") // 切点排除RepositoryRedistributeController下的所有方法。
    public void pointcut() { // 空方法，仅作为切点的标识。
    }

    @Around(value = "pointcut()") // 定义一个环绕通知（Around Advice），在匹配的方法调用前后执行。
    public Object around(ProceedingJoinPoint pjo) throws Throwable { // 声明around方法，参数pjo是一个代理点（ProceedingJoinPoint），代表即将被调用的方法。

        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest(); // 从当前线程中获取HttpServletRequest对象，用于读取HTTP请求头信息。

        AuthInfo authInfo = new AuthInfo(); // 创建AuthInfo对象，用于存储权限验证所需的信息。

        String userId = request.getHeader("userId"); // 从请求头中获取用户ID。
        String userAk = request.getHeader("userAk"); // 从请求头中获取用户的Access Key ID。
        String userSk = request.getHeader("userSk"); // 从请求头中获取用户的Secret Access Key。

        // 网关关闭鉴权，会发送一个userId为-1的请求头。
        if(!StringUtils.isEmpty(userId) && userId.equals("-1")){ // 如果用户ID存在且等于"-1"，表示网关关闭了鉴权。
            authInfoImpl.notifyAuthInfo((AuthInfo) null); // 调用AuthInfoImpl的notifyAuthInfo方法，传入null表示无需权限验证。
            return pjo.proceed(); // 继续执行原方法。
        }

        if (StringUtils.isEmpty(userId) || StringUtils.isEmpty(userAk) || StringUtils.isEmpty(userSk)) { // 检查用户ID、Access Key ID和Secret Access Key是否为空。
            throw new AppException("vcsAuthError", "auth failed"); // 如果缺少任何一项，则抛出AppException，表示权限验证失败。
        }
        
        authInfo.setUserId(Integer.valueOf(userId)); // 设置AuthInfo对象的用户ID。
        authInfo.setAccessKeyId(userAk); // 设置AuthInfo对象的Access Key ID。
        authInfo.setSecretAccessKey(userSk); // 设置AuthInfo对象的Secret Access Key。
        
        authInfoImpl.notifyAuthInfo(authInfo); // 调用AuthInfoImpl的notifyAuthInfo方法，传入填充好的AuthInfo对象进行权限验证。
        
        return pjo.proceed(); // 权限验证通过后，继续执行原方法。
    }
}

//定义了一个权限验证的切面，它会在指定的控制器方法调用前检查HTTP请求头中的权限信息，如果验证通过则允许方法继续执行；如果验证失败或网关指示无需验证，则会相应地抛出异常或直接放行。
```

## DataBase 模块

Database模块现在由一种mapper生成工具统一生成，所有的sql写法也都做了统一处理。 以后如果要修改，新增表，务必使用相同的工具生成。此工具存放在此模块test目录下，已经配置好，稍加修改执行即可。

```md
MybatisGenerator 

也可以使用idea的MybatisX插件自动生成
```



# 一、库管理

为了将所有的成员分门别类存放，便于后续识别、查找、布控，提供库管理功能，包含创建、修改、删除、查询等操作。不同成员存在意义不同，有些成员可以用来布控告警，有些成员只需要检索， 因此将库分为不同类型，提供不同作用。库类型分为黑名单、白名单、静态库。

* **黑名单、白名单**：目前功能一致，提供检索及布控，告警算子、检索算子均需要加载所有黑名单、白名单

* **静态库**：提供检索功能，检索算子加载；由于一般静态库成员较多，亿级别以上，若均加载在一个检索算子，会急剧消耗该算子内存，且检索性能低下；因此，对于静态库成员特征会进行**分片存储**，**每个检索算子加载某些分片**，尽量均衡

**目前只有人脸、步态具有库管理功能，包含创建、修改、删除、查询操作**。

约束条件：

>  库名称以及REPOSITORY_RECORD_ID不允许重复（不包括待删除的）

> 存在布控、通道分析挂载的抓拍库、聚类库不允许删除



| **库类型** | **描述**                   |
| ---------- | -------------------------- |
| 0          | 黑名单（布控库）（注册库） |
| 1          | 白名单（布控库）（注册库） |
| 2          | 静态库（注册库）           |
| 3          | 抓拍库                     |
| 4          | 路人库or聚类库             |
| 5          | 全局新建档库               |
| 99         | 通用类                     |



## 1. 人像库业务功能

### Repository数据表

![repository](C:\Users\485322\Documents\repository.png)

```java
// model
public class Repository extends BaseModel {
    /** 人像库ID */
    private Integer repositoryId;
    /** 人像库记录ID */
    private String repositoryRecordId;
    /** 库名称 */
    private String repositoryName;
    /** 库类型 */
    private Integer repositoryType;
    /** 备注 */
    private String memo;
    /** 创建时间 */
    private Long createtime;
    /** 更新时间 */
    private Long updatetime;
    /** 记录状态 */
    private Integer state;
    /** 版本号 */
    private Integer operationVersion;
    /** 用户ID */
    private Integer uid;
    /** 业务类型  1：face   2：车辆  4：结构化   8：缩略图 */
    private Integer businessType;
    /** 库生命周期 */
    private int lifeCycle;
}
```

<img src="C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240717100231910.png" alt="image-20240717100231910" style="zoom:25%;" />

### 1.1. 创建人像库

####   1.1.1 时序图

<img src="C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240717095338554.png" alt="image-20240717095338554" style="zoom:100%;" />

##### 1.1.2 流程图

##### 1.2.3 实现逻辑描述

1. SaaS平台下发修改任务，校验参数，name,memo长度不超过128 

2. 根据repositoryRecordId查询数据库表REPOSITORY记录，如果不存在，返回异常。

3. 判断是否为黑白名单库，且是否修改库名称。

   3.1 是  修改库名称，并请求Excutor同步路由

   3.2 否  修改库信息

4. 返回

##### 1.2.4 代码实现

1. controller 层

```java
/**
     * 修改face库.
     *
     * @param repositoryRecordId 脱敏的repositoryRecordId
     * @param faceSetBean        face库数据传输对象
     * @return 返回成功还是失败.
     * @throws AppException 校验失败时
     */
    @PutMapping("/repository/{repositoryRecordId}")
    @AuthEnable
    public ResponseEntity<Object> update(@PathVariable String repositoryRecordId,
                                         @RequestBody FaceSetBean faceSetBean)
            throws AppException {
        log.info("[PUT /face/repository/repositoryRecordId/{} ，params : {}]", repositoryRecordId,
                new Gson().toJson(faceSetBean));
        faceSetBean.doUpdateRequestVerify();
        ServiceResponse result = faceSetService.update(repositoryRecordId, faceSetBean);
        return ResponseUtil.genResponse(result);
    }
```

2. service层

```java
/**
     * 人像库更新操作.
     * @param repositoryRecordId 人像库脱敏ID.
     * @param faceSetBean 更新人像库信息.
     * @return 成功  失败.
     */
    public ServiceResponse update(String repositoryRecordId, FaceSetBean faceSetBean) {
        Repository repository = new Repository();
        repository.setRepositoryRecordId(repositoryRecordId);
        repository.setMemo(faceSetBean.getMemo());
        repository.setRepositoryName(faceSetBean.getName());

        // 执行
        RepositoryOptRst modifyRst = repositoryCenterService.modify(repository);

        if (!modifyRst.getCommonResponse().getSuccess()) {
            return transRepoOptRstToErrorResponse(modifyRst);
        }
        return create200ResponseWithoutBody();
    }
```

* 具体逻辑由 repositoryCenterService.modify(repository); 执行

```java
/**
     * 未使用缓存，实时查询.
     *
     * @param newRepository 待修改的查询
     * @return RepositoryOptRst
     */
    @Override
    public RepositoryOptRst  modify(Repository newRepository) {
        AuthInfo authInfo = authentication.getCurrentAccount();
        // 先从数据库中找到
        Repository repository = repositoryResourceAllServiceImpl.queryRepositoryByRepositoryRecordId(newRepository.getRepositoryRecordId(), authInfo.getUserId());
		// ....
        RepositoryTemplate commonRepository = new CommonRepository(repositoryResourceAllServiceImpl);
        RepositoryOptRst repositoryOptRst = new RepositoryOptRst();
        repositoryOptRst.setCommonResponse(commonRepository.modify(newRepository, repository)); // 更新
        return repositoryOptRst;
    }
```

* * 再执行 commonRepository.modify(newRepository, repository)

  ```java
  /**
       * 更新人像库信息. 
       * @param newRepository 新人像库信息
       * @return 成功   失败
       */
      public final RestCommonResponse modify(Repository newRepository, Repository oldRepository) {
          try {
              if (null == this.repository) {
                  this.repository = oldRepository;
              }
  
              //库名称是否重复
  			// ....
              //更新状态
              newRepository.setBusinessType(this.repository.getBusinessType());
              newRepository.setState(RepositoryState.ISSUCCESS.getType());
              newRepository.setRepositoryId(this.repository.getRepositoryId());
              boolean update2TaskManager = RepositoryType.BLOCKLIST.value.equals(oldRepository.getRepositoryType()) ||
                              RepositoryType.ALLOWLIST.value.equals(oldRepository.getRepositoryType());
              if (StringUtils.isNotBlank(newRepository.getRepositoryName()) && update2TaskManager &&
                      !this.repository.getRepositoryName().equals(newRepository.getRepositoryName())) {
                  log.info("updateById repository name will also send to taskManager");
                  return repositoryResourceAllServiceImpl.update2TaskManager(newRepository);
              }
              
              if (repositoryResourceAllServiceImpl.update(newRepository)) {
                  return new RestCommonResponse(true);
              }
          } 
      }
  ```

  * * repositoryResourceAllServiceImpl.update(newRepository) 去执行dao中的mapper

  ```java
  public boolean update(Repository repository) throws Exception {
          if (null == repository) {
              return true;
          }
          long updateTime = DateUtils.getUtcCurrentTimeMillis();
          repository.setUpdatetime(updateTime);
          log.info("modify repo info : {}", JSONObject.toJSONString(repository));
          repositoryExtMapper.updateRepoByRepositoryId(repository);
          return true;
      }
  ```

  ```xml
  <update id="updateRepoByRepositoryId"
              parameterType="com.dahuatech.cvengine.perception.database.core.model.Repository">
          update REPOSITORY
          <set>
              <if test="repository.updatetime != null">
                  REPOSITORY.UPDATETIME = #{repository.updatetime,jdbcType=BIGINT},
              </if>
              <if test="repository.repositoryName != null and repository.repositoryName != ''">
                  REPOSITORY_NAME = #{repository.repositoryName,jdbcType=VARCHAR},
              </if>
              <if test="repository.memo != null">
                  MEMO = #{repository.memo,jdbcType=VARCHAR},
              </if>
              <if test="repository.lifeCycle != null">
                  LIFE_CYCLE = #{repository.lifeCycle,jdbcType=BIGINT},
              </if>
              REPOSITORY.STATE =
              CASE
              WHEN (REPOSITORY.STATE IS NULL OR REPOSITORY.STATE > 1) THEN #{repository.state}
              ELSE REPOSITORY.STATE
              END
              ,
              OPERATION_VERSION =
              CASE
              WHEN REPOSITORY.OPERATION_VERSION is null THEN 1
              ELSE REPOSITORY.OPERATION_VERSION + 1
              END
          </set>
          where REPOSITORY_ID = #{repository.repositoryId}
      </update>
  ```

  修改黑白名单库，修改库名称，并请求Excutor同步路由

  ```java
  boolean update2TaskManager = RepositoryType.BLOCKLIST.value.equals(oldRepository.getRepositoryType()) ||
                              RepositoryType.ALLOWLIST.value.equals(oldRepository.getRepositoryType());
              if (StringUtils.isNotBlank(newRepository.getRepositoryName()) && update2TaskManager &&
                      !this.repository.getRepositoryName().equals(newRepository.getRepositoryName())) {
                  log.info("updateById repository name will also send to taskManager");
                  return repositoryResourceAllServiceImpl.update2TaskManager(newRepository);
              }
  ```

  * 关注 repositoryResourceAllServiceImpl.update2TaskManager(newRepository); 

  ```java
   @Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)
      public RestCommonResponse update2TaskManager(Repository newRepository) throws Exception {
          update(newRepository);
          //发送给taskManager
          updateNameToTaskManager(newRepository);
          return new RestCommonResponse(true);
      }
  ```

  * 关注 updateNameToTaskManager(newRepository);

  ```java
  private void updateNameToTaskManager(Repository repository) {
          AuthInfo currentAccount = authentication.getCurrentAccount();
          RepositoryInfo repositoryInfo = RepositoryInfo.newBuilder()
                  .setId(String.valueOf(repository.getRepositoryId()))
                  .setName(repository.getRepositoryName())
                  .setRecordId(repository.getRepositoryRecordId())
                  .setBusinessType(repository.getBusinessType())
                  .build();
          UpdateRepositoryRequest updateRepositoryRequest = UpdateRepositoryRequest.newBuilder()
                  .setReqHeader(HeaderUtils.buildCommonRequest())
                  .setRepositoryInfo(repositoryInfo)
                  .setUid(String.valueOf(currentAccount.getUserId()))
                  .build();
          CommonResponse commonResponse = pushService.updateRepositoryInfo(updateRepositoryRequest);
  }
  ```

  推送库信息给算子. public interface PushService

  ```java
  // RpcPushServiceImpl.java 
  @Override
  public CommonResponse updateRepositoryInfo(UpdateRepositoryRequest request) {
      // ...
      commonResponse = executorServiceClient.updateRepositoryInfo(updateRepositoryRequest);
      ExecutorService.switchReturnInfo(commonResponse);
  }
  ```

  再看 executorServiceClient.updateRepositoryInfo(）

  ```java
  @Override
  public CommonResponse updateRepositoryInfo(UpdateRepositoryRequest request) {
      List<ServiceNode> serviceNodes = executorServerManager.getAllExInfos();
  
      List<AbstractSubBroadcastTask<CommonResponse>> updateRepositoryTasks = new ArrayList<>();
      for (ServiceNode serviceNode : serviceNodes) {
          /**
               *  UpdateRepositoryInfoTask(ServiceNode serviceNode, UpdateRepositoryRequest updateRepositoryRequest) {
               *             this.serviceNode = serviceNode;
               *             this.updateRepositoryRequest = updateRepositoryRequest;
               *         }
               */
          UpdateRepositoryInfoTask updateRepositoryTask = new UpdateRepositoryInfoTask(serviceNode, request);
          updateRepositoryTasks.add(updateRepositoryTask);
      }
  
      CommonResponse commonResponse = RpcUtils
          .buildCommonResponse(RpcReturnCode.unavailable.getReturnCode());
      return submitBroadcastTaskList(updateRepositoryTasks, commonResponse);
  }
  
  ```

UpdateRepositoryInfoTask 实现了AbstractSubBroadcastTask, submit后执行remoteProcedureCall()方法

```java
// UpdateRepositoryInfoTask 实现了AbstractSubBroadcastTask
abstract static protected class AbstractSubBroadcastTask<V> implements Callable<V> {
        private CountDownLatch countDownLatch;

        void setCountDownLatch(CountDownLatch countDownLatch) {
            this.countDownLatch = countDownLatch;
        }

        @Override
        public V call() {
            try {
                return remoteProcedureCall();
            } finally {
                MDCWrapper.clear();
                countDownLatch.countDown();
            }
        }

        /**
         * RPC调用
         * @return RPC 响应
         */
        protected abstract V remoteProcedureCall();
    }
```



```java
@Override
protected CommonResponse remoteProcedureCall() {
    MDCWrapper.putTraceId(updateRepositoryRequest.getReqHeader().getRequestId());
    ExecutorServiceGrpc.ExecutorServiceBlockingStub stub = buildBlockingStub(serviceNode);
    RpcContext.getContext().set(Constant.SERVICE_NODE, serviceNode);
    return stub.updateRepositoryInfo(updateRepositoryRequest);
}
```

#### 3 删除人像库

##### 3.1 时序图

![image-20240718085054316](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718085054316.png)

##### 3.2 关键路径流程图

![image-20240718085841349](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718085841349.png)

##### 3.3 实现逻辑描述

1. SaaS平台下发删除任务，校验参数RecordId不能为空。

2. 查询REPOSITORY表中记录是否存在RecordId是否存在。

3. 存在该人像库，则判断该人像库是否被 布控任务（SURVEILLANCE表）、通道分析（CHANNEL_ANALYSIS表）、NVN任务（NVN_JOB表）使用。

4. 如果人像库在使用，抛出异常，正在使用，不可删除，不在使用跟新REPOSITORY.STATE、REPOSITORY_RESOURCE. OPERATION_STATE状态-2

5. 删除内存缓存，库id信息缓存，库资源关系缓存。

6. 返回成功

7. 后台线程执行清理动作



涉及到两个数据表 【Repository】和【Repository_Resource】

##### 3.4 业务逻辑实现

1. controller层接口

```java
/**
     * 删除face库.
     * @param repositoryRecordId 脱敏的repositoryRecordId
     * @return 返回成功 失败
     */
@AuthEnable
@RequestMapping(value = {"/repository/{repositoryRecordId}"}, method = {RequestMethod.DELETE})
public ResponseEntity<Object> delete(@PathVariable String repositoryRecordId) {
    ServiceResponse result = faceSetService.delete(repositoryRecordId);
    return ResponseUtil.genResponse(result);
}
```

2. service层服务

```java
/**
     * 删除人像库信息.
     * @param repositoryRecordId 人像库脱敏ID.
     * @return 成功  失败.
     */
public ServiceResponse delete(String repositoryRecordId) {

    RepositoryOptRst deleteRst = repositoryCenterService.delete(repositoryRecordId);

    // 聚类业务，直接发mq 删除库
    saveRecordService.deleteRepository(repositoryRecordId);

    if (!deleteRst.getCommonResponse().getSuccess()) {
        Repository repository = new Repository();
        repository.setRepositoryRecordId(repositoryRecordId);
        return transRepoOptRstToErrorResponse(deleteRst);
    }

    //从内存中删除库信息,前端后端均调用一遍，以免区分前后端
    try {
        Repository repository = deleteRst.getRepository();
        if (null != repository) {
            defaultRetrievalResourceCacheManage.removeRepositoryCache(repositoryRecordId, repository.getRepositoryId(), repository.getUid());
        }
    } catch (Exception e) {
        log.error("del repository info from memory exception : ", e);
    }

    return create200ResponseWithoutBody();
}
```

 分成多个步骤：

1. 修改Repository表中的状态值（state）（-2、-9）以及operation_version(每次+1)

抓拍库只需要删除表记录，跟人像库一系列整库删除流程不一样，抓拍库修改为(-9)，其他库修改为(-2); 修改 `REPOSITORY_RESOURCE` 表中的 `OPERATION_STATE = -2`

> * 删表`RepositoryOptRst deleteRst = repositoryCenterService.delete(repositoryRecordId);`
>
> * * 
>
>   ```java
>    @Override
>       public RepositoryOptRst delete(String repositoryRecordId) {
>         // 重点 
>       repositoryOptRst.setCommonResponse(commonRepository.delete(repositoryRecordId, authInfo.getUserId(), null));
>       }
>   ```
>
> * `commonRepository.delete(repositoryRecordId, authInfo.getUserId(), null)`
>
> * * ```java
>     /**
>      * 根据脱敏ID删除人像库.
>      * @param repositoryRecordId 人像库脱敏ID.
>      * @return 成功  失败
>      */
>     public final RestCommonResponse delete(String repositoryRecordId, int uid,Integer dataSource) {
>         try {
>             if (null == repository) {
>                 repository = queryRepositoryByRepositoryRecordId(repositoryRecordId, uid);
>             }
>     // ...
>          //判断该人像库是否被使用,正在使用不能删除
>         
>          //更新状态
>          Repository repositoryDel = new Repository();
>          //抓拍库只需要删除表记录，跟人像库一系列整库删除流程不一样
>       repositoryDel.setState(repository.getRepositoryType().equals(RepositoryType.CAPTURE.value) ? Step.MYSQL_REPOSITORY.getStep() : RepositoryState.TOBECLEAN.getType());
>          
>          repositoryDel.setRepositoryId(repository.getRepositoryId());       		 repositoryDel.setRepositoryRecordId(repository.getRepositoryRecordId());
>          repositoryDel.setBusinessType(repository.getBusinessType());
>          Boolean isDelete = repositoryResourceAllServiceImpl.delete(repositoryDel, dataSource);   
>         }
>     ```
>
> * `Boolean isDelete = repositoryResourceAllServiceImpl.delete(repositoryDel, dataSource);`
>
> * * ```java
>     @Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)
>     public boolean delete(Repository repository, Integer... dataSource) {
>         // 执行删除
>         if (repositoryExtMapper.updateDelRepoByRepositoryId(repository) < 0) {
>             throw new RuntimeException("delete repository info exception!");
>         }
>         delRepoToTaskManager(Arrays.asList(repository), repository.getBusinessType(), dataSource);
>         return true;
>         }
>     ```
>
> * `repositoryExtMapper.updateDelRepoByRepositoryId(repository)`
>
> * * ```xml
>     <update id="updateDelRepoByRepositoryId"
>            parameterType="com.dahuatech.cvengine.perception.database.core.model.Repository">
>         update REPOSITORY
>         <set>
>             <if test="repository.updatetime != null">
>                 REPOSITORY.UPDATETIME = #{repository.updatetime,jdbcType=BIGINT},
>             </if>
>             REPOSITORY.STATE = #{repository.state}
>                 ,
>                 OPERATION_VERSION =
>                 CASE
>                 WHEN REPOSITORY.OPERATION_VERSION is null THEN 1
>                 ELSE REPOSITORY.OPERATION_VERSION + 1
>                 END
>         </set>
>         where REPOSITORY_ID = #{repository.repositoryId}
>     </update>
>     ```
>
> * 还要执行`delRepoToTaskManager(Arrays.asList(repository), repository.getBusinessType(), dataSource);` 
>
> * * ```java
>     @Override
>         public void delRepositoryResource(DelRepResourceRequest request) throws DaoException {
>             if (StringUtils.isBlank(request.getUid()) || CollectionUtils.isEmpty(request.getRepositoryIds())) {
>                 log.error("DelRepResourceRequest param is error,return");
>                 throw new BusinessException(VCS_MISSING_PARAM);
>             }
>             List<IRepositoryResourceHandle> handles = getBusinessTypeHandles(request.getBusinessType(), request.getRepositoryType(), request.getDataSource());
>             if (CollectionUtils.isEmpty(handles)) {
>                 log.error("no IRepositoryResourceHandle impl");
>                 throw new BusinessException(VCS_PARAM_ERROR);
>             }
>             for (IRepositoryResourceHandle handle : handles) {
>                 // 重点
>                 handle.deleteRepositoryResourceInfo(request);
>             }
>         }
>     ```
>
> * `handle.deleteRepositoryResourceInfo(request);`
>
> * * ```java
>     @Override
>         public void deleteRepositoryResourceInfo(DelRepResourceRequest request) throws DaoException {
>             String uid = request.getUid();
>             List<Integer> repositoryIds = Lists.newArrayList();
>             request.getRepositoryIds().forEach(repoId -> repositoryIds.add(Integer.valueOf(repoId)));
>             // 逻辑删除数据库
>             deleteToDb(repositoryIds);
>             // 根据库删除库资源缓存缓存
>             removeRepositoryCache(uid, repositoryIds);
>         }
>     ```
>
> * `// 逻辑删除数据库
>           deleteToDb(repositoryIds);`
>
> * * ```java
>     /**
>          * 逻辑删除数据库
>          *
>          * @param repositoryIds
>          */
>     protected void deleteToDb(List<Integer> repositoryIds) throws DaoException {
>         repositoryResourceDao.updateStateByRepositoryIds(repositoryIds);
>     }
>     ```
>
>   * ```jav
>     public int updateStateByRepositoryIds(List<Integer> repositoryIds) throws DaoException {
>         try {
>     
>         return repositoryResourceExtMapper.updateStateByRepositoryIds(repositoryIds);
>         } catch (Exception e) {
>         log.error("update statebyRepositoryId failed:{}", e.getMessage());
>         throw new DaoException("update statebyRepositoryId failed");
>         }
>     }
>     ```
>
> * `repositoryResourceExtMapper.updateStateByRepositoryIds(repositoryIds);`
>
> * * 修改 `REPOSITORY_RESOURCE` 表中的 `OPERATION_STATE = -2`
>
>     ```java
>     <update id="updateStateByRepositoryIds" parameterType="java.util.List">
>         update REPOSITORY_RESOURCE
>         SET OPERATION_STATE = -2
>         where REPOSITORY_ID in
>         <foreach collection="list" item="repositoryId" open="(" separator="," close=")">
>           #{repositoryId,jdbcType=INTEGER}
>         </foreach>
>       </update>
>     ```
>
> * 还需要执行 `// 根据库删除库资源缓存缓存
>           removeRepositoryCache(uid, repositoryIds);`
>
> * * ```java
>     /**
>      * 删除缓存
>      * @param repositoryIds
>      * @param uid
>      */
>     protected void removeRepositoryCache(String uid, List<Integer> repositoryIds) {
>         repositoryIds.forEach(repositoryId -> {
>             Map<String, Set<ShardToResource>> shardToResourceMap = map.get(uid);
>             if (MapUtils.isNotEmpty(shardToResourceMap)) {
>                 shardToResourceMap.remove(repositoryId.toString());
>             }
>         });
>     }
>     ```

2.  聚类业务，直接发mq 删除库

> * ```
>   // 聚类业务，直接发mq 删除库
>   saveRecordService.deleteRepository(repositoryRecordId);
>   ```
>
> * * 
>
>   ```java
>   //行业一体机，删除库
>       public void deleteRepository(String repositoryRecordId) {
>           FaceMember2Cluster faceMember2Cluster = new FaceMember2Cluster();
>           faceMember2Cluster.setEvent(MEMBER_EVENT);
>           faceMember2Cluster.setOperation(MemberOperationEnum.DELETE_MEMBER_REPOSITORY.getCode());
>           faceMember2Cluster.setRepositoryId(repositoryRecordId);
>           log.info("send delete repository message the repositoryRecordId is {}",repositoryRecordId);
>           // 重点
>           sendByMq(Collections.singletonList(faceMember2Cluster));
>       }
>   ```
>
> * `sendByMq(Collections.singletonList(faceMember2Cluster));`
>
> * * ```java
>     public SaveRecordResponse sendByMq(List<FaceMember2Cluster> faceMember) {
>             log.info("send message into cluster db ,size is {}",faceMember.size());
>             Integer userId = authentication.getCurrentAccount().getUserId();
>             String exchange = commonProperties.getFaceMemberClusterExchange();
>             String routeKey = String.join("",commonProperties.getFaceMemberClusterRouteKey(),userId.toString());
>             log.info("send FaceMember2Cluster message to exchange:{} , routeKey:{}",exchange,routeKey);
>             HashMap<String, Boolean> sendResult = new HashMap<>();
>             faceMember.forEach(item ->{
>                 boolean send = rabbitMqSender.send(JSONObject.toJSONString(item), exchange, routeKey);
>                 sendResult.put(item.getMemberId(),send);
>             });
>             List<String> failedMemberIdList = sendResult.entrySet().stream().filter(entry -> entry.getValue().equals(false)).map(Map.Entry::getKey).collect(Collectors.toList());
>             log.info("send message into cluster db success size {}",faceMember.size() - failedMemberIdList.size());
>             if (!CollectionUtils.isEmpty(failedMemberIdList) && failedMemberIdList.size() == faceMember.size()){
>                 return new SaveRecordResponse(true, new ErrorCode(ErrorEnum.VCS_MQ_ERROR.getError_code(), ErrorEnum.VCS_MQ_ERROR.getError_desc(), ErrorEnum.VCS_MQ_ERROR.getHttpStatus()), failedMemberIdList);
>             }
>             return new SaveRecordResponse(false, new ErrorCode(ErrorEnum.VCS_MQ_ERROR.getError_code(), ErrorEnum.VCS_MQ_ERROR.getError_desc(), ErrorEnum.VCS_MQ_ERROR.getHttpStatus()), failedMemberIdList);
>         }
>     ```
>
> * `boolean send = rabbitMqSender.send(JSONObject.toJSONString(item), exchange, routeKey);`
>
> * * ```java
>     public boolean send(String message, String exchange, String routingKey) {
>         long start = System.currentTimeMillis();
>         try {
>             this.rabbitTemplate.convertAndSend(exchange, routingKey, message);
>             long end = System.currentTimeMillis();
>             long takeTime = end - start;
>             if (takeTime > 20) {
>                 log.warn("send to mq too slow, takeTime is {}", takeTime);
>             }
>             return true;
>         } catch (Exception e) {
>             reconnectionAction();
>             log.error("send message error: " + e);
>             return false;
>         }
>     }
>     ```
>
>   * 为什么发送到mq就可以删除？

3.  从内存中删除库信息,前端后端均调用一遍，以免区分前后端

> * `defaultRetrievalResourceCacheManage.removeRepositoryCache(repositoryRecordId, repository.getRepositoryId(), repository.getUid());`
>
> * * ```java
>     @Override
>     public void removeRepositoryCache(String repositoryRecordId, Integer repositoryId,
>                                       Integer uid) {
>         // 重点
>         retrievalResourceCache.removeRepositoryCache(repositoryRecordId, repositoryId, uid);
>     }
>     ```
>
> * `retrievalResourceCache.removeRepositoryCache(repositoryRecordId, repositoryId, uid);`
>
> * * 从内存中删除对应的信息记录
>
>     ```java
>     /**
>          * 删除库使用（布控库、静态库、抓拍库）
>          *
>          * @param repositoryRecordId
>          * @param uid                鉴权用户id
>          */
>     public void removeRepositoryCache(String repositoryRecordId, Integer repositoryId, Integer uid) {
>         String repoStr = String.valueOf(repositoryId);
>         recordRepositoryIdMap.remove(repositoryRecordId);
>         repositoryTypeMap.remove(repoStr);
>         if (userRepositoryMap.containsKey(uid)) {
>             userRepositoryMap.get(uid).remove(repoStr);
>         }
>     }
>     ```

#### 4. 查询人像库

##### 4.1 时序图

![image-20240718105301037](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718105301037.png)

##### 4.2 关键路径流程图

![image-20240718105336712](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718105336712.png)

##### 4.3 实现逻辑描述

1. SaaS平台下发查询请求，校验参数，分页参数校验；组装查询参数name/key模糊查询。

2. 判断库成员存储位置

   2.1 云库 查询云库个人像库ID对应成员人数。

   2.2  mysql 查询MEMBER, REPOSITORY 表统计人像库ID对应库成员人数。

3. 返回封结果

##### 4.4 业务逻辑实现

1. controller层接口

```java
/**
     * 分页查询人像库信息.
     * @param start 从第几个结果开始返回,最小值为1，不填默认为1
     * @param limit 返回至多多少结果，最大值为1024，不填默认为512
     * @param type  人像库类型
     * @param name  人像库名称，支持模糊查询，即支持前向匹配、后向匹配、中间匹配
     * @param key   人像库名称或者描述的模糊查询，支持前向匹配、后向匹配、中间匹配（人像大数据平台使用）；当name不为空时，以name为主
     * @return 人像库分页信息
     * @throws AppException 检验失败时
     */
    @GetMapping("/repository")
    @AuthEnable
    public ResponseEntity<Object> query(
            @RequestParam(value = "start", defaultValue = "1") Integer start,
            @RequestParam(value = "limit", defaultValue = "512") Integer limit,
            @RequestParam(value = "type", required = false) Integer type,
            @RequestParam(value = "name", required = false) String name,
            @RequestParam(value = "key", required = false) String key) throws AppException {
        // ...
        result = queryFaceSetService.query(start, limit, type, name, key);
        return ResponseUtil.genResponse(result);
    }
```

2. service层

```java
/**
     * 根据库类型、名称分页查询库信息，支持库名称的模糊查询。(注：抓拍库不返回,只返回0  1  2 库类型).
     *
     * @param start 起始
     * @param limit 最多
     * @param type  库类型
     * @param name  库名称
     * @param key   关键字（身份证或者名字）
     * @return 满足条件库列表.
     * @throws AppException 异常返回.
     */
public ServiceResponse query(Integer start, Integer limit, Integer type,
                             String name, String key) throws AppException {
    // 校验分页参数

    try {
        // 参数进行转义
        name = decodeQueryParam(name);
        key = decodeQueryParam(key);
        JSONObject result = repositoryService.query(start, limit, type, name, key);
        return ServiceResponse.build(HttpStatus.OK, result, true);
    } catch (Exception e) {
        log.error("query mysql error", e);
        return ServiceResponse.transRepoOptRstToErrorResponse(e,
                                                              "query repository failed.");
    }
}
```

3. serviceImpl具体实现

```java
/*
     * 查看人像库
     */
@Override
public JSONObject query(Integer start, Integer limit, Integer type, String name, String key)
    throws Exception {
    // ...
    // 查询满足条件的记录总条数
    Integer totalCount = repositoryDao.queryCount(start - 1, limit, type,
                                                  name, key, authInfo.getUserId());

    // 分页查询
    List<RepositorySearchInfo> repositoryList = repositoryDao
        .query(start - 1, limit, type, name, key, authInfo.getUserId());
    // 当不存在库时 直接返回查询结果
    if (CollectionUtils.isEmpty(repositoryList)) {
        result.put("totalCount", totalCount);
        result.put("results", new ArrayList<RepositorySearchInfo>());
        return result;
    }

    // 统计各个库下面对应的member个数
    List<String> repositoryRecordIds = repositoryList.stream()
        .collect(Collectors.mapping(
            RepositorySearchInfo::getRepositoryRecordId,
            Collectors.toList()));

    // 根据库ID查询库成员个数信息
    Map<String, Integer> repoMemberCount = queryRepositoryMemberCount(repositoryRecordIds);

    // 将库对应的库成员个数信息封装到结果中
    for (RepositorySearchInfo info : repositoryList) {
        int count = 0;
        if (repoMemberCount.get(info.getRepositoryRecordId()) != null) {
            count = repoMemberCount.get(info.getRepositoryRecordId())
                .intValue();
        }
        info.setTotalPictureCount(count); // 库中图片的数目
        info.setFaceImageCount(count); // 库中face数量
    }

    result.put("results", repositoryList);
    result.put("totalCount", totalCount);
    return result;
}
```

* 先查询记录总条数

   `Integer totalCount = repositoryDao.queryCount(start - 1, limit, type,
                                                    name, key, authInfo.getUserId());`

  > ```java
  > public Integer queryCount(Integer start, Integer limit, Integer type, String name, String key,
  >                               Integer uid) {
  >         return repositoryExtMapper.selectCount(start, limit, type, name, key, uid);
  >     }
  > ```
  >
  > * mapper.xml 
  >
  > * ```xml
  >   <select id="selectCount" resultType="java.lang.Integer">
  >       SELECT count(1) FROM REPOSITORY WHERE STATE >= 0 AND REPOSITORY_TYPE IN (0, 1, 2)
  >       <if test="type !=null">
  >           AND REPOSITORY_TYPE = #{type,jdbcType=INTEGER}
  >       </if>
  >       <if test="name !=null">
  >           AND REPOSITORY_NAME LIKE #{name,jdbcType=VARCHAR}
  >       </if>
  >       <if test="name ==null">
  >           <if test="key !=null">
  >               AND (REPOSITORY_NAME LIKE #{key,jdbcType=VARCHAR}
  >               OR MEMO LIKE #{key,jdbcType=VARCHAR})
  >           </if>
  >       </if>
  >       <if test="uid !=null">
  >           AND UID = #{uid,jdbcType=INTEGER}
  >       </if>
  >       AND BUSINESS_TYPE = 0
  >   </select>
  >   ```

* 再将记录全部取出来 

```
// 分页查询
List<RepositorySearchInfo> repositoryList = repositoryDao
        .query(start - 1, limit, type, name, key, authInfo.getUserId());
```

> mapper.xml
>
> ```xml
> <select id="selectAll" resultMap="RepositoryResultMap">
>         select REPOSITORY_ID,REPOSITORY_RECORD_ID,REPOSITORY_NAME,REPOSITORY_TYPE,MEMO,CREATETIME
>         from REPOSITORY
>         where STATE >= 0 and REPOSITORY_TYPE IN (0, 1, 2)
>         <if test="type !=null">
>             AND
>             REPOSITORY_TYPE = #{type,jdbcType=INTEGER}
>         </if>
>         <if test="name !=null">
>             AND
>             REPOSITORY_NAME LIKE #{name,jdbcType=VARCHAR}
>         </if>
>         <if test="name ==null">
>             <if test="key !=null">
>                 AND
>                 (REPOSITORY_NAME LIKE #{key,jdbcType=VARCHAR}
>                 OR
>                 MEMO LIKE #{key,jdbcType=VARCHAR})
>             </if>
>         </if>
>         <if test="uid !=null">
>             AND UID = #{uid,jdbcType=INTEGER}
>         </if>
>         AND BUSINESS_TYPE = 0
>         LIMIT #{start,jdbcType=INTEGER}, #{limit,jdbcType=INTEGER}
>     </select>
> ```

* ```
  统计各个库下面对应的member个数 将所有的Id组成一个List列表;
  根据库ID查询库成员个数信息
  ```

```java
List<String> repositoryRecordIds = repositoryList.stream()
                .collect(Collectors.mapping(
                        RepositorySearchInfo::getRepositoryRecordId,
                        Collectors.toList()));
```

`Map<String, Integer> repoMemberCount = queryRepositoryMemberCount(repositoryRecordIds);`

> ```java
> /**
>      * 根据库ID列表查询库ID对应的库成员个数
>      *
>      * param isMysql       20230508 删除数据库判断      判断从数据库查询还是从云数据库查询库成员个数
>      * @param repositoryRecordIds 待查询库成员个数对应的库ID列表
>      */
> private Map<String, Integer> queryRepositoryMemberCount(
>     List<String> repositoryRecordIds)
>     throws Exception {
>     List<QueryAggregate> repoMembers = null;
>     // 判断库成员查询是否查当前数据库
>     repoMembers = queryDseMemberCount(repositoryRecordIds);
> 
> 
>     // 将查询到的库对应的库成员转换为map
>     if (CollectionUtils.isNotEmpty(repoMembers)) {
>         return repoMembers.stream()
>             .filter(p -> StringUtils.isNotBlank(p.getRepositoryId()))
>             .collect(Collectors.toMap(QueryAggregate::getRepositoryId,
>                                       QueryAggregate::getCount));
>     }
> 
>     return new HashMap<String, Integer>();
> }
> ```
>
> * `// 判断库成员查询是否查当前数据库
>       repoMembers = queryDseMemberCount(repositoryRecordIds);`
>
> * * ```java
>     /**
>          * 根据库ID列表从云数据库查询库成员个数
>          *
>          * @param repositoryRecordIds 库ID列表
>          */
>     private List<QueryAggregate> queryDseMemberCount(
>         List<String> repositoryRecordIds) throws AppException {
>         
>         // 组装调用云数据库接口查询参数
>         CaptureQueryParam captureQueryParam = makeQueryMemberAggParam(
>             repositoryRecordIds);
>         
>         int limit = repositoryRecordIds.size();
>         int start = 1; // 一次性查询出当前页所有库ID包含的成员个数
>         try {
>             JerseyResponse queryMemberAggregate = dseService
>                 .queryMemberAggregate(captureQueryParam,
>                                       authInfo.getAccessKeyId(),
>                                       authInfo.getSecretAccessKey(), start,
>                                       limit);
>                 // 当接口查询成功时
>                 QueryAggregateResult queryAggregateResult = new Gson().fromJson(
>                     (String) queryMemberAggregate.getResult(),
>                     QueryAggregateResult.class);
>                 if (queryAggregateResult != null
>                     && queryAggregateResult.getResult() != null) {
>                     return queryAggregateResult.getResult();
>                 } 
>             }
>         }
>         return null;
>     }
>     ```
>
>   * 重点在 
>
>     ```
>     JerseyResponse queryMemberAggregate = dseService
>             .queryMemberAggregate(captureQueryParam,
>                     authInfo.getAccessKeyId(),
>                     authInfo.getSecretAccessKey(), start,
>                     limit);
>     ```
>
>     * ```java
>       @Override
>       public JerseyResponse queryMemberAggregate(CaptureQueryParam captureQueryParam, String ak,
>                                                  String sk, Integer start, Integer limit) {
>           if (captureQueryParam == null) {
>               return null;
>           }
>       
>           String uri = "/clouddb/dbs/face/member/agg?start=" + start + "&limit=" + limit;
>           String requestUrl = dseServiceUrl + uri;
>           // 
>           Map<String, String> headers = CommonUtils.createAuthorization(POST.name(), uri, sk, ak);
>           return JerseyResponse
>               .of(restTemplateUtil.exchange(requestUrl, POST, headers, captureQueryParam));
>       }
>       ```
>
>      根据ak、sk以及请求的信息组成请求头;向云数据库发起查询请求；请求成功后将查询结果包装到JerseyResponse中。
>
> 得到每个库id及其对应的记录个数

* 最后将库ID和其对应的个数信息封装到结果中。

```java
/**
         * public class RepositorySearchInfo {
         *     @JsonIgnore
         *     private String id;
         *     @JsonProperty("id")
         *     private String repositoryRecordId;
         *     private String name;
         *     private int type;
         *     private String memo;
         *     private long createTime;
         *     private String creator;
         *     private int totalPictureCount;
         *     private int faceImageCount;
         *     private int failedPictureCount;
         *     @JsonIgnore
         *     private Integer totalCount;
         *     @JsonIgnore
         *     private Integer resourceId;
         * }
         */
// 将库对应的库成员个数信息封装到结果中
for (RepositorySearchInfo info : repositoryList) {
    int count = 0;
    if (repoMemberCount.get(info.getRepositoryRecordId()) != null) {
        count = repoMemberCount.get(info.getRepositoryRecordId())
            .intValue();
    }
    info.setTotalPictureCount(count); // 库中图片的数目
    info.setFaceImageCount(count); // 库中face数量
}

result.put("results", repositoryList);
result.put("totalCount", totalCount);
```

返回的结果是一个JSONObject，一项是查出来的数据表Repository中的每一条记录，将其对应的云数据库中的图片数目和face数目存入；另一项是Repository数据表中的记录总条数。

> 个人理解：Repository存的是各种类型库的信息（如静态库对应的id这些基本信息），但重要敏感的数据（如人脸图像）都是存到云端数据库，所以只查询Repository是无法获取这些敏感数据。查询的时候先查询Repository每个库的ID等信息，再用这些信息去查询云端数据库。
>
> 这个查询人像库的接口是获取每个库对应的记录数量。



#### 5. 查看单个人像库

##### 5.1 时序图

![image-20240718150218928](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718150218928.png)

##### 5.2 关键路径流程图

![image-20240718150504778](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718150504778.png)

##### 5.3 实现逻辑描述

1. SaaS平台下发查询请求，校验参数，

2. 根据REPOSITORY_RECORD_ID 查询库信息，如果不存在，抛出异常

3. 判断库成员存储位置、

   3.1云库 查询云库个人像库ID对应成员人数。

   3.2 mysql 查询MEMBER, REPOSITORY 表统计人像库ID对应库成员人数。

4. 返回结果

##### 5.4 业务逻辑实现

1. controller层接口

```java
/**
     * 查询单个人像库信息.
     * @param repositoryRecordId 脱敏的repositoryRecordId
     * @return 该id对应的单个人像库信息
     */
@GetMapping("/repository/{repositoryRecordId}")
@AuthEnable
public ResponseEntity<Object> getInfo(@PathVariable String repositoryRecordId,
                                      @RequestParam(value = "showCounts", required = false) Boolean showCounts) {
    if (showCounts == null) {
        showCounts = true;
    }
    ServiceResponse result = queryFaceSetService.getByRepositoryId(repositoryRecordId, showCounts);
    return ResponseUtil.genResponse(result);
}
```

2. service层

```java
/**
     * 查询单个人像库.
     *
     * @param repositoryRecordId 脱敏ID
     * @param showCounts         是否展示成员个数.
     * @return 库信息列表
     */
public ServiceResponse getByRepositoryId(String repositoryRecordId, Boolean showCounts) {
    try {
        // 只允许查询黑白名单及其静态库(即对应的 0,1,2)
		// 重点
        RepositorySearchInfo result = repositoryService
            .getByRepositoryRecordId(repositoryRecordId,
                                     BusinessType.FACE.getCode(), types, showCounts);
}
```

3. 具体查询方法  `repositoryService.getByRepositoryRecordId()`

```java
/**
     * 通过库ID查询单人像库信息
     * @param repositoryRecordId 库ID
     * @param businessType       业务类型
     * @param showCounts         是否查询库成员个数
     */
@Override
public RepositorySearchInfo getByRepositoryRecordId(
    String repositoryRecordId, Integer businessType, List<Integer> types, Boolean showCounts)
    throws Exception {
   
    // 根据请求库ID查询库信息
    RepositorySearchInfo result = repositoryDao
        .selectRepoByRepositoryRecordId(repositoryRecordId,
                                        businessType, types, authInfo.getUserId());
    // 判断库是否存在
    // 当需要统计库成员个数时
   
    // 从云数据库查询，和查询人像库逻辑相同

    return result;
}
```

这里执行mapper`repositoryDao.selectRepoByRepositoryRecordId()`

```java
@Nullable
public RepositorySearchInfo selectRepoByRepositoryRecordId(String repositoryRecordId,
                                                           Integer businessType, List<Integer> types, Integer uid) throws DaoException {
    try {
        return repositoryExtMapper
            .selectRepoByRepositoryRecordId(repositoryRecordId, businessType, types, uid);
    } 
}
```

mapper.xml

```xml
<select id="selectRepoByRepositoryRecordId" resultMap="RepositoryResultMap">
        select REPOSITORY_ID,
        REPOSITORY_RECORD_ID,
        REPOSITORY_NAME,
        REPOSITORY_TYPE,
        MEMO,
        CREATETIME
        from REPOSITORY
        where STATE >= 0
        <if test="businessType !=null">
            AND
            BUSINESS_TYPE= #{businessType, jdbcType=INTEGER}
        </if>
        <if test="types !=null and types.size() != 0">
            AND REPOSITORY_TYPE in
            <foreach collection="types" item="type" open="(" separator=","
                     close=")">
                #{type,jdbcType=INTEGER}
            </foreach>
        </if>
        <if test="uid !=null">
            AND
            UID= #{uid, jdbcType=INTEGER}
        </if>
        AND REPOSITORY_RECORD_ID = #{repositoryRecordId,jdbcType=VARCHAR} limit 0,1
    </select>
```

返回的是一个 RepositorySearchInfo，需要需要统计库成员个数时，将从云端数据库查询到的数量信息注入

```
result.setTotalPictureCount(count); // 库中图片的数目
result.setFaceImageCount(count); // 库中face数量
```

#### 6. 查看库信息（只看0，1，2库）

##### 6.1 时序图

![image-20240718155309267](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718155309267.png)

##### 6.2 关键路径流程图

![image-20240718155412373](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718155412373.png)

##### 6.3 实现逻辑描述

1. SaaS平台查询请求，分页参数校验，type类型校验 0,1,2,3,4 或者为null; 转译name、key模糊查询.

2. 查询REPOSITORY对应库信息。（不返回库成员数量）

3. 返回封装结果

##### 6.4 业务逻辑实现

1. controller接口

```java
/**
     * 分页查询face库信息.
     *
     * @param start 从第几个结果开始返回,最小值为1，不填默认为1
     * @param limit 返回至多多少结果，最大值为1024，不填默认为512
     * @param type  库类型
     * @param name  人像库名称，支持模糊查询，即支持前向匹配、后向匹配、中间匹配
     * @param key   人像库名称或者描述的模糊查询，支持前向匹配、后向匹配、中间匹配（人像大数据平台使用）；当name不为空时，以name为主
     * @return 人像库分页信息
     * @throws AppException 检验失败时
     */
    @GetMapping("/repositories")
    @AuthEnable
    public ResponseEntity<Object> queryAll(
            @RequestParam(value = "start", defaultValue = "1") Integer start,
            @RequestParam(value = "limit", defaultValue = "512") Integer limit,
            @RequestParam(value = "type", required = false) String type,
            @RequestParam(value = "name", required = false) String name,
            @RequestParam(value = "key", required = false) String key) throws AppException {
        
        // 1,2,3,4 校验
        result = queryFaceSetService.queryAll(start, limit, type, name, key);
        return ResponseUtil.genResponse(result);
    }
```

2. service 业务 `queryFaceSetService.queryAll(start, limit, type, name, key);`

```java
/**
     * 根据库类型、名称分页查询库信息，支持库名称的模糊查询。(注：车辆抓拍库不返回，只返回face相关的库).
     *
     * @param start 起始
     * @param limit 最多
     * @param type  库类型
     * @param name  库名称
     * @param key   关键字（身份证或者名字）
     * @return 满足条件库列表.
     * @throws AppException 异常返回.
     */
public ServiceResponse queryAll(Integer start, Integer limit, String type,
                                String name, String key) throws AppException {
    try {
        // 参数进行转义// 特殊字符拼接sql是否存在问题？待确认
        // name = "%" + name + "%";
        name = decodeQueryParam(name);
        key = decodeQueryParam(key);
        List<String> repTypes = null;
        if (StringUtils.isNotBlank(type)) {
            repTypes = Arrays.asList(type.split(","));
        }

        result = repositoryService.queryAll(start, limit, repTypes, name,
                                            key, BusinessType.FACE.getCode());
        return ServiceResponse.build(HttpStatus.OK, result, true);
    } 
}
```

` repositoryService.queryAll`()

```java
/*
     * 查询库信息
     */
@Override
public JSONObject queryAll(Integer start, Integer limit,
                           List<String> repTypes, String name, String key,
                           Integer businessType) throws DaoException {
    AuthInfo authInfo = authentication.getCurrentAccount();
    try {
        JSONObject result = new JSONObject();
        // 分页查询
        List<RepositorySearchInfoUnCount> repositoryList = repositoryDao
            .queryAll(start - 1, limit, repTypes, name, key,
                      businessType, authInfo.getUserId());
        if (CollectionUtils.isEmpty(repositoryList)) {
            result.put("totalCount", 0);
            result.put("results", new ArrayList<RepositorySearchInfo>());
        } else {
            result.put("results", repositoryList);
            result.put("totalCount", repositoryList.get(0).getTotalCount());
        }
        return result;

}
```

```java
public List<RepositorySearchInfoUnCount> queryAll(Integer start, Integer limit,
                                                  @Param("repositoryRecordTypes") List<String> repositoryRecordTypes,
                                                  String name, String key, Integer businessType, Integer uid) {
    return repositoryExtMapper
        .selectAllRepositoryByParam(start, limit, repositoryRecordTypes, name, key,
                                    businessType, uid);
}
```

mapper.xml

```xml
 <select id="selectAllRepositoryByParam" resultMap="RepositoryResultMapUnCount">
        select REPOSITORY_ID,REPOSITORY_RECORD_ID,REPOSITORY_NAME,REPOSITORY_TYPE,MEMO,CREATETIME,
        (select count(*) from REPOSITORY where STATE >= 0
        <if test="repositoryTypes !=null">
            AND
            REPOSITORY_TYPE in
            <foreach collection="repositoryTypes" item="repositoryType"
                     open="(" close=")" separator=",">
                #{repositoryType}
            </foreach>
        </if>
        <if test="name !=null">
            AND
            REPOSITORY_NAME LIKE #{name,jdbcType=VARCHAR}
        </if>
        <if test="name ==null">
            <if test="key !=null">
                AND
                (REPOSITORY_NAME LIKE #{key,jdbcType=VARCHAR}
                OR
                MEMO LIKE #{key,jdbcType=VARCHAR})
            </if>
        </if>
        <if test="businessType !=null">
            AND
            BUSINESS_TYPE= #{businessType, jdbcType=INTEGER}
        </if>
        <if test="uid !=null">
            AND
            UID LIKE #{uid,jdbcType=VARCHAR}
        </if>
        ) as TOTAL_COUNT
        from REPOSITORY
        where STATE >= 0
        <if test="repositoryTypes !=null">
            AND
            REPOSITORY_TYPE in
            <foreach collection="repositoryTypes" item="repositoryType"
                     open="(" close=")" separator=",">
                #{repositoryType}
            </foreach>
        </if>
        <if test="name !=null">
            AND
            REPOSITORY_NAME LIKE #{name,jdbcType=VARCHAR}
        </if>
        <if test="name ==null">
            <if test="key !=null">
                AND
                (REPOSITORY_NAME LIKE #{key,jdbcType=VARCHAR}
                OR
                MEMO LIKE #{key,jdbcType=VARCHAR})
            </if>
        </if>
        <if test="businessType !=null">
            AND
            BUSINESS_TYPE= #{businessType, jdbcType=INTEGER}
        </if>
        <if test="uid !=null">
            AND
            UID LIKE #{uid,jdbcType=VARCHAR}
        </if>
        LIMIT #{start,jdbcType=INTEGER}, #{limit,jdbcType=INTEGER}
    </select>
```

#### 7. 批量查看库信息（只看0，1，2）

##### 7.1 时序图

![image-20240718161921668](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718161921668.png)

##### 7.2 关键路径流程图

![image-20240718161946272](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718161946272.png)

##### 7.3 实现逻辑描述

1. Saas下发批量查询库信息，分页参数校验。查询类型校验，

2. 根据是否存在recordId确定精确查询或模糊查询

3. 封装返回结果

##### 7.4 业务逻辑实现

1. controller接口

```java
/**
     * 批量查看人像库.
     */
@PostMapping("/repository/queries")
@AuthEnable
public ResponseEntity<Object> queryFaceSetInfo(@RequestBody QueryFaceSetBean queryFaceSetBean)
    throws AppException {
    queryFaceSetBean.doQueryRequestVerify();
    ServiceResponse result = queryFaceSetService.queryFaceSetInfo(queryFaceSetBean);
    return ResponseUtil.genResponse(result);

}
```

2. service 层

```java
/**
     * 查询库信息.
     *
     * @param bean 查询条件.
     * @return 库信息列表.
     */
public ServiceResponse queryFaceSetInfo(QueryFaceSetBean bean) {
    try {
        AuthInfo authInfo = authentication.getCurrentAccount();
        List<RepositorySetInfo> repositorySetInfoList = repositoryDao
            .queryFaceSetInfo(bean.getIds(), bean.getStart(),
                              bean.getLimit(), bean.getType(), bean.getName(),
                              bean.getKey(), authInfo.getUserId());
}
```

`repositoryDao.queryFaceSetInfo()`

```java
public List<RepositorySetInfo> queryFaceSetInfo(List<String> ids, Integer start, Integer limit,
                                                Integer type, String name, String key, Integer uid) throws DaoException {
    try {
        if (CollectionUtils.isNotEmpty(ids)) {
            List<RepositorySetInfo> repositorySetInfos = repositoryExtMapper
                .selectFaceSetInfoByIds(ids, uid);
            if (CollectionUtils.isNotEmpty(repositorySetInfos)
                && repositorySetInfos.size() != ids.size()) {
                log.error(
                    "query ids size is ({}), but mysql return size is ({}), maybe some repositoryId do not belong uid ({})",
                    ids.size(), repositorySetInfos.size(), uid);
            }
            return repositorySetInfos;
        } else {
            return repositoryExtMapper
                .selectFaceSetInfo(start - 1, limit, type, name, key, uid);
        }
    } 
}
```

只能查 0，1，2库

* 如果 ids不为空，就是制定了表id，则根据id来查询

```
repositoryExtMapper.selectFaceSetInfoByIds(ids, uid);
```

```xml
<select id="selectFaceSetInfoByIds" resultMap="FaceSetResultMap">
        select REPOSITORY_ID,REPOSITORY_RECORD_ID,REPOSITORY_NAME,REPOSITORY_TYPE,MEMO,CREATETIME
        from REPOSITORY
        where STATE >= 0 AND REPOSITORY_TYPE IN (0, 1, 2)
        AND REPOSITORY_RECORD_ID IN
        <foreach collection="repostioryRecordIds" item="repostioryRecordId" open="(" separator=","
                 close=")">
            #{repostioryRecordId,jdbcType=VARCHAR}
        </foreach>
        <if test="uid !=null">
            AND UID = #{uid,jdbcType=INTEGER}
        </if>
        AND BUSINESS_TYPE = 0
    </select>
```

* 如果id为空，则根据其它条件查询

```
 repositoryExtMapper.selectFaceSetInfo(start - 1, limit, type, name, key, uid);
```

```xml
<select id="selectFaceSetInfo" resultMap="FaceSetResultMap">
        select REPOSITORY_ID,REPOSITORY_RECORD_ID,REPOSITORY_NAME,REPOSITORY_TYPE,MEMO,CREATETIME
        from REPOSITORY
        where STATE >= 0 and REPOSITORY_TYPE IN (0, 1, 2)
        <if test="type !=null">
            AND
            REPOSITORY_TYPE = #{type,jdbcType=INTEGER}
        </if>
        <if test="name !=null and name != ''">
            AND
            REPOSITORY_NAME LIKE #{name,jdbcType=VARCHAR}
        </if>
        <if test="name ==null or name == ''">
            <if test="key !=null and key != ''">
                AND
                (REPOSITORY_NAME LIKE #{key,jdbcType=VARCHAR}
                OR
                MEMO LIKE #{key,jdbcType=VARCHAR})
            </if>
        </if>
        <if test="uid !=null">
            AND UID = #{uid,jdbcType=INTEGER}
        </if>
        AND BUSINESS_TYPE = 0
        LIMIT #{start,jdbcType=INTEGER}, #{limit,jdbcType=INTEGER}
    </select>
```

#### 8. 查看人像库图片信息 (只是查询了图片数量信息，和上面逻辑相同)

##### 8.1 时序图

![image-20240718163430859](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718163430859.png)

##### 8.2  关键路径流程图

![image-20240718163459386](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240718163459386.png)

##### 8.3 实现逻辑描述

1. SaaS平台请求查询人像库图片信息，参数校验，库id不能为空

2. 校验库id是否存在，不存在返回异常

3. 存在库id,判断是否开启云存，开启云存，则云库查询库图片信息

4. 未开启云存，则查询

5. 返回封装结果

##### 8.4 业务逻辑实现

1. controller接口

```java
/**
     * 查看人像库图片信息.
     */
@PostMapping("/repository/picture")
@AuthEnable
public ResponseEntity<Object> queryFaceSetPicCount(
    @RequestBody QueryFaceSetBean queryFaceSetBean) throws AppException {
    queryFaceSetBean.doQueryFaceSetPicCountVerify();
    // 
    ServiceResponse result = queryFaceSetService
        .queryFaceSetPicCount(queryFaceSetBean.getIds());
    return ResponseUtil.genResponse(result);
}
```

2. service层

```
queryFaceSetService.queryFaceSetPicCount(queryFaceSetBean.getIds());
```

```java
/**
     * 根据库ID列表，批量查询库中图片信息. (数量)
     * @param repositoryRecordIds 库记录ID列表.
     * @return 库信息记录.
     */
public ServiceResponse queryFaceSetPicCount(List<String> repositoryRecordIds) {
    try {
       
        List<RepositorySetPicCount> picCounts = new ArrayList<>();
        // 对人像库ID进行过滤 - 库ID必须是0,1,2的库类型，业务类型为face
        List<RepositorySetInfo> faceSets = repositoryDao.queryFaceSetInfo(
            repositoryRecordIds, 1, null, null, null, null, authInfo.getUserId());
        
        Map<String, Integer> repoMemberCount = new HashMap<>();
        if (CollectionUtils.isEmpty(faceSets)) {
            // 不存在有效的库ID
        } else {
            // 存在满足条件的人像库ID
            List<String> faceRecordIds = faceSets.stream()
                .collect(Collectors.mapping(
                    RepositorySetInfo::getRepositoryRecordId,
                    Collectors.toList()));
            repoMemberCount = repositoryService.queryFaceSetPicCount(faceRecordIds);
        }
        // 将库对应的库成员个数信息封装到结果中
        for (String id : repositoryRecordIds) {
            Integer count = repoMemberCount.get(id);

            picCounts.add(RepositorySetPicCount.builder().id(id)
                          .totalPictureCount(count).build());
        }
        RepositorySetPicCountResult repositorySetPicCountResult = RepositorySetPicCountResult
            .builder().results(picCounts).build();
        return ServiceResponse.build(HttpStatus.OK,
                                     repositorySetPicCountResult, true);
    } 
}
```

`repoMemberCount = repositoryService.queryFaceSetPicCount(faceRecordIds);`

```java
/*
     * 根据库ID列表，批量查询库中图片信息
     */
@Override
public Map<String, Integer> queryFaceSetPicCount(
    List<String> repositoryRecordIds) throws Exception {
    // 根据库ID查询库成员个数信息
    return queryRepositoryMemberCount(repositoryRecordIds);
}
```

从云数据库查询对应的图片数量

`repoMembers = queryDseMemberCount(repositoryRecordIds);`



### 2. 步态库业务功能 （整体逻辑与人像库业务一致）

#### 2.1 新建步态库

步骤和流程与创建人像库一致，都是使用了 	`repositoryCenterService.create` 方法

##### 2.1.1 时序图

![image-20240719101122505](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101122505.png)

##### 2.1.2 关键路径流程图

![image-20240719101137237](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101137237.png)

##### 2.1.3 实现逻辑描述

1. Saas请求创建步态库，校验参数，库类型为0,1,2,3,4否则抛出异常。

2. 业务数据校验,是否存在相同的库id，存在则返回失败。

3. 将库信息写入REPOSITORY表，将脱敏库id和主键库id的映射关系、库资源关系写入内存



#### 2.2 修改步态库

##### 2.2.1 时序图

![image-20240719101324951](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101324951.png)

##### 2.2.2 关键路径流程图

![image-20240719101332995](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101332995.png)

##### 2.2.3 实现逻辑描述

1. SaaS平台下发修改任务，校验参数，name,memo长度不超过128 

2. 根据repositoryRecordId查询数据库表REPOSITORY记录，如果不存在，返回异常。

3. 判断是否为黑白名单库，且是否修改库名称。

   3.1 是  修改步态库名称，并请求Excutor同步路由

   3.2 否  修改步态库信息

4. 返回



#### 2.3 分页查询步态库

##### 2.3.1 时序图

![image-20240719101501594](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101501594.png)

##### 2.3.2 关键路径流程图

![image-20240719101514767](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101514767.png)

##### 2.3.3 实现逻辑描述

1. Saas下发步态库查询参数，校验分页参数。Id数组大小小于1024,name支持后模糊查询

2. Ids存在时忽略type和name，校验id是否都存在于REPOSITORY表中类型为0,1,2

3. 返回查询结果



#### 2.4 删除步态库

##### 2.4.1 时序图

![image-20240719101619828](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101619828.png)



##### 2.4.2 关键路径流程图

![image-20240719101628125](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101628125.png)

##### 2.4.3 实现逻辑描述



1. SaaS平台下发删除任务，校验参数RecordId不能为空。

2. 查询REPOSITORY表中记录是否存在RecordId是否存在。

3. 判断是否存在该步态库，则判断该步态库是否被 布控任务（SURVEILLANCE表）、通道分析（CHANNEL_ANALYSIS表）、NVN任务（NVN_JOB表）使用。

4. 如果步态库在使用，抛出异常，正在使用，不可删除，不在使用跟新REPOSITORY.STATE、REPOSITORY_RESOURCE. OPERATION_STATE状态-2

5. 删除内存缓存，库id信息缓存，库资源关系缓存。

6. 返回成功

7. 后台线程执行清理动作



### 3 库资源管理功能

#### 3.1 绑定资源关系

##### 3.1.1 流程图

<img src="C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240719101913464.png" alt="image-20240719101913464" style="zoom:150%;" />

##### 3.1.2 流程描述

1、 创建库，根据库类型创建对应的库或分片

2、 根据库类型查询需要绑定的算子资源

3、 将库绑定关系持久化到mysql

4、 写入内存

注意点：

(1)  静态库可能只是添加一个库Id,并不会创建分片，这时候我们只把key保存在Map中，value是空. 这么做只是为了让DP动作统一，实际上保存这个没有其他作用。

(2)  查询资源的方式：

布控库：查询单个状态为(1,6) ，剩余能力最多的检索算子，(1,3,6)的所有告警算子。

静态库：查询单个状态为(1,6) ，剩余能力最多的检索算子。

抓拍库：查询单个状态为(1,3,6)的检索算子。

(3)  添加布控库，需要和所有的告警绑定

(4)  存在的问题：

只有一个告警算子也可以添加布控库成功，这样会导致不能选择这个库进行检索。



##### 3.1.3 业务逻辑实现

* 主要接口 `public interface IRepositoryResourceHandle {}`

```java
/**
 * 添加库-资源关系,静态库需要返回一个RepositoryShard信息，知道创建的分片
 */
List<RepResource> addRepositoryResourceInfo(AddRepResourceRequest request) throws DaoException;
/** public class AddRepResourceRequest {
    private List<String> repositoryIds;
    private Integer repositoryType;
    private Integer businessType;
    private Boolean createShard;
    private Integer shardMaxSize;
    private String uid;
    private Integer dataSource;
} */
```



* 获取资源，实际在子类根据业务类型去获取  （有17个子类实现）

  `protected abstract List<ResourceInfo> getResources(int businessType, Integer repositoryNum)`

  * 不同的业务有不同的实现

资源类型有 running、shutdown、pending、pre_running、loading

```java
public enum ResourceState {
    RESOURCE_RUNNING_STATE(1),
    RESOURCE_SHUTDOWN_STATE(2),
    RESOURCE_PENDING_STATE(3),
    RESOURCE_PRE_RUNNING_STATE(4),
    RESOURCE_LOADING_STATE(6),;
}
```

```java
@Override
protected List<ResourceInfo> getResources(int businessType, Integer repositoryNum) throws AppException {
    log.info("to query resource {}", FACE_ALARM_TYPE.getName());
    List<ResourceInfo> resourceInfos = new ArrayList<>();
    // 检索算子 布控库（黑白名单） 1 6
    Integer[] retrivalResourceStates = new Integer[]{RESOURCE_RUNNING_STATE.getValue(), RESOURCE_LOADING_STATE.getValue()};
    // 告警算子 布控库（黑白名单） 1 3 6
    Integer[] alarmResourceStates = new Integer[]{RESOURCE_RUNNING_STATE.getValue(), RESOURCE_PENDING_STATE.getValue(), RESOURCE_LOADING_STATE.getValue()};
    // 先获取告警算子
    FilterParameter filterParameter = FilterParameter.builder().deviceStates(alarmResourceStates).availableDeviceTypes(new Integer[]{FACE_ALARM_TYPE.getType()}).build();

    // 根据自定义的资源类型获取可用资源
    ResourceWrapper<List<ResourceInfo>> listResourceWrapper = resourceCenterService.getAvailableResourceWithCustomSelector(filterParameter, null, 0);
    if (!listResourceWrapper.isHasWorkableResource() && listResourceWrapper.getErrorEnum().equals(RESOURCE_UNAVAILABLE)) {
        // 请求资源管理中心异常
        throw new AppException(RESOURCE_UNAVAILABLE);
    }
    // 有可用资源
    if (listResourceWrapper.isHasWorkableResource()) {
        // 将资源加入到 resourceInfos
        resourceInfos.addAll(listResourceWrapper.getWorkableResource());
    }
    // 再获取检索资源
    filterParameter = FilterParameter.builder().deviceStates(retrivalResourceStates).availableDeviceTypes(new Integer[]{FACE_RETRIEVAL_MATCH_TYPE.getType()}).build();
    ResourceWrapper<List<ResourceInfo>> resourceWrapper = resourceCenterService.getAvailableResourceWithCustomSelector(filterParameter, AllocationStrategy.SHARD_STRATEGY, 1);

    if (!resourceWrapper.isHasWorkableResource() && resourceWrapper.getErrorEnum().equals(RESOURCE_UNAVAILABLE)) {
        // 请求资源管理中心异常
        throw new AppException(RESOURCE_UNAVAILABLE);
    }
    // 没有获取到正在运行的（RUNNING）检索算子资源，如果找到PENDING的算子资源，报没有空闲异常
    if (!resourceWrapper.isHasWorkableResource() && !resourceWrapper.getErrorEnum().equals(RESOURCE_UNAVAILABLE)) {
        // 找 PENDING状态的算子资源
        filterParameter = FilterParameter.builder().deviceStates(new Integer[]{RESOURCE_PENDING_STATE.getValue()}).availableDeviceTypes(new Integer[]{FACE_RETRIEVAL_MATCH_TYPE.getType()}).build();
        ResourceWrapper<List<ResourceInfo>> offLineResources = resourceCenterService.getAvailableResourceWithCustomSelector(filterParameter, null, 1);
        if (!offLineResources.isHasWorkableResource() && offLineResources.getErrorEnum().equals(RESOURCE_UNAVAILABLE)) {
            // 请求资源管理中心异常
            throw new AppException(RESOURCE_UNAVAILABLE);
        }
        // 没有空闲的资源
        if (offLineResources.isHasWorkableResource()) {
            throw new AppException(NO_FREE_RESOURCE);
        }
    }
    if (resourceWrapper.isHasWorkableResource()) {
        // 取第一个资源
        resourceInfos.add(resourceWrapper.getWorkableResource().get(0));
    }
    return resourceInfos;
}
```

* 获取资源的流程是：1.构建检索filterParameter，利用GRPC去请求获取；2.根据请求结果，将可用的算子资源保存在resourcesInfos列表中，返回。



以下代码的limit作用？

```
ResourceWrapper<List<ResourceInfo>> resourceWrapper = resourceCenterService.getAvailableResourceWithCustomSelector(filterParameter, null, limit);
```



```java 
//com/dahuatech/cvengine/perception/core/repositoryResourceManage/handler/BaseRepositoryResourceHandle.java
addRepositoryResourceInfo 这个函数很重要，将加载的资源保存
```





```java
@Override
public List<RepResource> addRepositoryResourceInfo(AddRepResourceRequest request) throws DaoException {

    String uid = request.getUid();
    int businessType = request.getBusinessType();
    int dataSource = request.getDataSource();
    int repositoryType = request.getRepositoryType();
    int shardMaxSize = request.getShardMaxSize() == null ? 0 : request.getShardMaxSize();
    List<RepResource> repResourceList = Lists.newArrayList();

    // 静态库，没有创建分片
    if (request.getCreateShard() != null && !request.getCreateShard() && STATIC.getValue().equals(request.getRepositoryType())) {
        log.info("repositoryType is static and don not create shard! return success");
        //静态库若是添加了，但是没创建分片，则我们也要保存一下空信息，查询时返回空,直接返回success
        map.putIfAbsent(uid, new ConcurrentHashMap<>(16));
        request.getRepositoryIds().stream().forEach(repositoryId -> map.get(uid).putIfAbsent(repositoryId, new HashSet<>()));
        return repResourceList;
    }

    //1.  获取抓拍库应该查询的资源信息,如果只有一个抓拍库，则只选择一个检索资源；如果有多个抓拍库则选择所有检索资源
    List<ResourceInfo> resourceInfos = getResources(businessType, request.getRepositoryIds().size());
    if (CollectionUtils.isEmpty(resourceInfos) || !isHasRetrievalResource(resourceInfos)) {
        // 如果没有资源，则做响应处理
        processNotResource(uid, dataSource, businessType, repositoryType, request.getRepositoryIds());
    }

    //2. 将抓拍库分配到不同的检索资源中，组成map
    Map<String, Set<ShardToResource>> repoToResMap = bindResToRepo(resourceInfos, request.getRepositoryIds());

    //3. 组建repositoryResource，并批量插入数据库
    Map<Integer, ResourceInfo> resourceInfoMap = resourceInfos.stream().collect(Collectors.toMap(ResourceInfo::getResourceId, Function.identity(), (key1, key2) -> key2));
    saveToDb(repoToResMap, shardMaxSize, resourceInfoMap);
    log.info("add capture repositoryResource info to DB success!!!!");

    //5. 保存到内存中
    saveCache(uid, repoToResMap);

    //6. 处理返回结果，目前只有静态库需要处理返回结果
    doResult(repoToResMap, repResourceList, resourceInfos);

    //7. 推库处理，目前只有冷搜算子需要推库
    pushRepository(repoToResMap, resourceInfos);
    return repResourceList;
}
```





* `AbstractStub`类提供了基础的RPC调用逻辑，包括连接管理、序列化/反序列化、错误处理等。它还提供了方法来构建和配置客户端存根，比如设置Channel、CallOptions等。通过继承`AbstractStub`，子类可以专注于实现具体的RPC方法，而不需要关心底层的通信细节。
* `withDeadlineAfter`方法帮助你管理RPC调用的超时时间，这对于处理那些可能长时间运行或不可预测的服务响应非常重要。它确保了客户端不会无休止地等待，提高了应用程序的健壮性和用户体验。当RPC调用超时被取消时，gRPC框架会释放与该调用相关的资源，如网络连接和线程，避免资源泄露。超时后，gRPC会抛出一个`Status.DEADLINE_EXCEEDED`异常，这可以帮助你识别哪些服务调用可能存在问题，比如性能瓶颈或服务不可用。



##### 3.1.4 绑定资源关系——流程梳理

新建人像库和步态库都会执行`repositoryResourceAllServiceImpl.insert(repository, businessType, dataSource);` 该方法中有一行执行`addRepoToTaskManager()`方法，该方法的底层就是执行库资源关系绑定；

```java
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)
public Repository insert(Repository repository, int businessType, Integer dataSource) throws Exception {
    if (null == repository) {
        return null;
    }
    repositoryExtMapper.insert(repository);
    // 库资源绑定
    addRepoToTaskManager(String.valueOf(repository.getRepositoryId()), repository.getRepositoryType(), false, businessType, dataSource, repository.getUid());
    return repository;
}
```

分析 `addRepoToTaskManager()`方法；重点在 `repResourceList = repositoryResourceService.addRepositoryResource(addRepResourceRequest);` 

```
@Override
public List<RepResource> addRepositoryResource(AddRepResourceRequest request) throws DaoException {
    //1: 参数校验
    //2: 获取业务处理类
    List<IRepositoryResourceHandle> handles = getBusinessTypeHandles(request.getBusinessType(), request.getRepositoryType(), request.getDataSource());

    //3: 业务处理  异常这里不处理，交给上层捕获
    List<RepResource> shardResources = Lists.newArrayList();
    for (IRepositoryResourceHandle handle : handles) {
        // 绑定资源关系 addRepositoryResourceInfo（）
        shardResources.addAll(handle.addRepositoryResourceInfo(request));
    }
    return shardResources;
}
```

* 首先获取业务处理类，不同的业务有不同的业务实现；
* 获取到业务处理类handles后，会执行`handle.addRepositoryResourceInfo(request)` 方法，该方法是库资源绑定的关键，具体的绑定细节都在该方法中执行；

**进入`handle.addRepositoryResourceInfo(request)` 方法 **

```java
@Override
public List<RepResource> addRepositoryResourceInfo(AddRepResourceRequest request) throws DaoException {

    String uid = request.getUid();
    int businessType = request.getBusinessType();
    int dataSource = request.getDataSource();
    int repositoryType = request.getRepositoryType();
    int shardMaxSize = request.getShardMaxSize() == null ? 0 : request.getShardMaxSize();
    List<RepResource> repResourceList = Lists.newArrayList();

    // 静态库，没有创建分片
    if (request.getCreateShard() != null && !request.getCreateShard() && STATIC.getValue().equals(request.getRepositoryType())) {
        log.info("repositoryType is static and don not create shard! return success");
        //静态库若是添加了，但是没创建分片，则我们也要保存一下空信息，查询时返回空,直接返回success
        map.putIfAbsent(uid, new ConcurrentHashMap<>(16));
        request.getRepositoryIds().stream().forEach(repositoryId -> map.get(uid).putIfAbsent(repositoryId, new HashSet<>()));
        return repResourceList;
    }

    //1.  获取抓拍库应该查询的资源信息,如果只有一个抓拍库，则只选择一个检索资源；如果有多个抓拍库则选择所有检索资源
    List<ResourceInfo> resourceInfos = getResources(businessType, request.getRepositoryIds().size());
    if (CollectionUtils.isEmpty(resourceInfos) || !isHasRetrievalResource(resourceInfos)) {
        // 如果没有资源，则做响应处理
        //  log.info("get resource is null, so save repository to DB UNPROCESS_REPOSITORY !!!!");
        processNotResource(uid, dataSource, businessType, repositoryType, request.getRepositoryIds());
    }

    //2. 将抓拍库分配到不同的检索资源中，组成map
    Map<String, Set<ShardToResource>> repoToResMap = bindResToRepo(resourceInfos, request.getRepositoryIds());

    //3. 组建repositoryResource，并批量插入数据库
    Map<Integer, ResourceInfo> resourceInfoMap = resourceInfos.stream().collect(Collectors.toMap(ResourceInfo::getResourceId, Function.identity(), (key1, key2) -> key2));
    saveToDb(repoToResMap, shardMaxSize, resourceInfoMap);
    log.info("add capture repositoryResource info to DB success!!!!");

    //5. 保存到内存中
    saveCache(uid, repoToResMap);

    //6. 处理返回结果，目前只有静态库需要处理返回结果
    doResult(repoToResMap, repResourceList, resourceInfos);

    //7. 推库处理，目前只有冷搜算子需要推库
    pushRepository(repoToResMap, resourceInfos);
    return repResourceList;
}
```

执行流程与业务描述一致

1. 创建库，根据库类型创建对应的库或分片
2. 根据库类型查询需要绑定的算子资源
3. 将库绑定关系持久化到mysql
4. 写入内存

注意点：

(1)  静态库可能只是添加一个库Id,并不会创建分片，这时候我们只把key保存在Map中，value是空. 这么做只是为了让DP动作统一，实际上保存这个没有其他作用。

(2)  查询资源的方式：

布控库：查询单个状态为(1,6) ，剩余能力最多的检索算子，(1,3,6)的所有告警算子。

静态库：查询单个状态为(1,6) ，剩余能力最多的检索算子。

抓拍库：查询单个状态为(1,3,6)的检索算子。

(3)  添加布控库，需要和所有的告警绑定

(4)  存在的问题：

只有一个告警算子也可以添加布控库成功，这样会导致不能选择这个库进行检索。



#### 3.2 推库功能





### 4. 库成员管理

#### 4.1 功能描述

为了查询检索，将成员记录导入库中，同时提取每个成员的特征记录，便于后续的特征比对计算相似性进行检索。功能包含：

1. 添加：库成员图片存入Feature固态存储，对于后端智能——将图片发往分析算子提取特征，特征写入Feature固态存储，同时特征实时添加进检索、告警算子，最后记录写入mysql或发往云数据库的MQ进行固态存储；

2. 删除：由于成员图片业务层还需要用到，如历史告警原图展示，因此删除成员时，不进行图片删除，只删除成员记录（mysql或者CloudDB）及算子内存加载、Feature固态存储的特征

3. 修改：修改mysql、CloudDB或者前端智能上的记录数据 

4. 查询：根据查询条件从mysql或者CloudDB中查询成员记录数据

约束条件：recordId必须唯一



#### 4.2 人像库——新增库成员

添加库成员保存在sql的逻辑，是否需要删除。很少有项目保存在mysql，但是如果去掉，没有云库，库成员是否就会添加失败。

##### 4.2.1 时序图

![image-20240723091403455](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240723091403455.png)

##### 4.2.2 流程图

![image-20240723091425574](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240723091425574.png)

##### 库信息补全和参数转换

![image-20240723091540003](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240723091540003.png)

##### 特征添加和广播

![image-20240723091642016](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240723091642016.png)

##### 库成员持久化

**库成员成功计数**

![image-20240723091707111](C:\Users\485322\AppData\Roaming\Typora\typora-user-images\image-20240723091707111.png)

##### 流程描述

1    接收到Saas服务下发添加库成员请求。

2    **服务状态检查**：检测mysql以及mq状态，如异常返回异常

**3**    **参数校验**

4    **参数转换**：将下发参数repositoryId（对应数据库REPOSITORY. REPOSITORY_RECORD_ID）转换成内部使用的repositoryId（对应数据库REPOSITORY. REPOSITORY_ID）

5    **图片转存**：如果是图片添加库成员，在开启静态库智能存储的条件下，将图片url给到feature转存

6    **库信息补全**：静态库添加库成员，需要获取静态库分片。如果分片不存在，或已存在分片都大于等于阈值，则需要创建新的静态库分片，并绑定库资源关系；如果分片存在且小于分片阈值，选取剩余容量最小分片。

7    **特征提取：**如果使用特征添加库成员，则向Feature存储特征；如果使用图片添加库成员，则向分析算子提取特征，（如需存储特征）向Feature存储特征。

8    **特征存储：**向Feature请求添加特征，失败记录相应错误码和错误信息，成功则向算子广播库成员特征。

9    **特征广播：**将提取的特征通过rpc请求广播给算子，成功则持久化库成员，失败则写入Mysql FEATURE_TO_BROADCAST、FEATURE_TO_RESOURCE表，交由后台线程处理。

10   **库成员持久化：**

**10.1** **本地mysql持久化：**将库成员写入member表，完成

**10.2** **云库持久化：**将库成员通过mq消息或者使用云库http接口保存库成员信息。

11   **返回添加结果。**



**异常点处理**及影响：

l 基础环境检查

MQ及MYSQL任一异常，则直接返回导库失败，强依赖

l 异常点一：算子实时特征存储失败

处理方式：写表，每天凌晨执行，记录url走重提

l 异常点二：CloudDB存储失败

处理方式：返回失败，单独写失败日志，该日志不设置生命周期

影响：

a)   算子内存空间占用

b)  检索：以图搜图算子有返回，若设置face.is.return.op.result=false，补齐时云数据库无法查询则不对外展示，则对结果无影响；若设置face.is.return.op.result=true，则会返回无结构化数据的记录；该配置默认为true；

c)   查询：无影响

d)  告警：无影响，Executor信息补全失败则不告警

l 异常点三：mysql存储失败

处理方式：同异常点二

影响：同异常点二





### 布控管理

将通道与布控库（黑名单库、白名单库）关联，按照预先设定的阈值，当通道过人与被布控的库中的某个或多个库成员相似度>=阈值，则触发告警。

#### 1. 添加人脸布控管理

##### 1.1. 时序图

![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfUAAAIdCAYAAAAkt+RjAAAAAXNSR0IArs4c6QAAOm90RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwYWdlbnQlM0QlMjJNb3ppbGxhJTJGNS4wJTIwKFdpbmRvd3MlMjBOVCUyMDEwLjAlM0IlMjBXaW42NCUzQiUyMHg2NCklMjBBcHBsZVdlYktpdCUyRjUzNy4zNiUyMChLSFRNTCUyQyUyMGxpa2UlMjBHZWNrbyklMjBDaHJvbWUlMkYxMjYuMC4wLjAlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjB2ZXJzaW9uJTNEJTIyMjQuNy42JTIyJTIwc2NhbGUlM0QlMjIxJTIyJTIwYm9yZGVyJTNEJTIyMCUyMiUzRSUwQSUyMCUyMCUzQ2RpYWdyYW0lMjBuYW1lJTNEJTIyJUU3JUFDJUFDJTIwMSUyMCVFOSVBMSVCNSUyMiUyMGlkJTNEJTIyR1paR0xYRzZIODhILUllN1RSVTklMjIlM0UlMEElMjAlMjAlMjAlMjAlM0NteEdyYXBoTW9kZWwlMjBkeCUzRCUyMjExNDclMjIlMjBkeSUzRCUyMjczNyUyMiUyMGdyaWQlM0QlMjIxJTIyJTIwZ3JpZFNpemUlM0QlMjIxMCUyMiUyMGd1aWRlcyUzRCUyMjElMjIlMjB0b29sdGlwcyUzRCUyMjElMjIlMjBjb25uZWN0JTNEJTIyMSUyMiUyMGFycm93cyUzRCUyMjElMjIlMjBmb2xkJTNEJTIyMSUyMiUyMHBhZ2UlM0QlMjIxJTIyJTIwcGFnZVNjYWxlJTNEJTIyMSUyMiUyMHBhZ2VXaWR0aCUzRCUyMjgyNyUyMiUyMHBhZ2VIZWlnaHQlM0QlMjIxMTY5JTIyJTIwbWF0aCUzRCUyMjAlMjIlMjBzaGFkb3clM0QlMjIwJTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTNDcm9vdCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyMCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMjAlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTElMjIlMjB2YWx1ZSUzRCUyMiUyMiUyMHN0eWxlJTNEJTIyZ3JvdXAlMjIlMjB2ZXJ0ZXglM0QlMjIxJTIyJTIwY29ubmVjdGFibGUlM0QlMjIwJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB4JTNEJTIyNjAlMjIlMjB5JTNEJTIyMTIwJTIyJTIwd2lkdGglM0QlMjI3MCUyMiUyMGhlaWdodCUzRCUyMjU0MCUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTIlMjIlMjB2YWx1ZSUzRCUyMlNhc3MlRTUlQjklQjMlRTUlOEYlQjAlMjIlMjBzdHlsZSUzRCUyMnJvdW5kZWQlM0QwJTNCd2hpdGVTcGFjZSUzRHdyYXAlM0JodG1sJTNEMSUzQmZpbGxDb2xvciUzRCUyM2Q1ZThkNCUzQnN0cm9rZUNvbG9yJTNEJTIzODJiMzY2JTNCJTIyJTIwdmVydGV4JTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTElMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwd2lkdGglM0QlMjI3MCUyMiUyMGhlaWdodCUzRCUyMjQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMyUyMiUyMHZhbHVlJTNEJTIyU2FzcyVFNSVCOSVCMyVFNSU4RiVCMCUyMiUyMHN0eWxlJTNEJTIycm91bmRlZCUzRDAlM0J3aGl0ZVNwYWNlJTNEd3JhcCUzQmh0bWwlM0QxJTNCZmlsbENvbG9yJTNEJTIzZDVlOGQ0JTNCc3Ryb2tlQ29sb3IlM0QlMjM4MmIzNjYlM0IlMjIlMjB2ZXJ0ZXglM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB5JTNEJTIyNTAwJTIyJTIwd2lkdGglM0QlMjI3MCUyMiUyMGhlaWdodCUzRCUyMjQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtNCUyMiUyMHN0eWxlJTNEJTIyZWRnZVN0eWxlJTNEb3J0aG9nb25hbEVkZ2VTdHlsZSUzQnJvdW5kZWQlM0QwJTNCb3J0aG9nb25hbExvb3AlM0QxJTNCamV0dHlTaXplJTNEYXV0byUzQmh0bWwlM0QxJTNCZXhpdFglM0QwLjUlM0JleGl0WSUzRDElM0JleGl0RHglM0QwJTNCZXhpdER5JTNEMCUzQmVudHJ5WCUzRDAuNSUzQmVudHJ5WSUzRDAlM0JlbnRyeUR4JTNEMCUzQmVudHJ5RHklM0QwJTNCZW5kQXJyb3clM0Rub25lJTNCZW5kRmlsbCUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTElMjIlMjBzb3VyY2UlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0yJTIyJTIwdGFyZ2V0JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMyUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi01JTIyJTIwdmFsdWUlM0QlMjIxJUVGJUJDJTlBJUU0JUI4JThCJUU1JThGJTkxJUU2JUI3JUJCJUU1JThBJUEwJUU0JUJBJUJBJUU4JTg0JUI4JUU1JUI4JTgzJUU2JThFJUE3JTIyJTIwc3R5bGUlM0QlMjJodG1sJTNEMSUzQnZlcnRpY2FsQWxpZ24lM0Rib3R0b20lM0JlbmRBcnJvdyUzRGJsb2NrJTNCY3VydmVkJTNEMCUzQnJvdW5kZWQlM0QwJTNCJTIyJTIwZWRnZSUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0xJTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHdpZHRoJTNEJTIyODAlMjIlMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjIzOCUyMiUyMHklM0QlMjI4MCUyMiUyMGFzJTNEJTIyc291cmNlUG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjE2OCUyMiUyMHklM0QlMjI4MCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0zNyUyMiUyMHZhbHVlJTNEJTIyJUU1JUI4JTgzJUU2JThFJUE3JUU0JUJCJUJCJUU1JThBJUExSUQlMjIlMjBzdHlsZSUzRCUyMmh0bWwlM0QxJTNCdmVydGljYWxBbGlnbiUzRGJvdHRvbSUzQmVuZEFycm93JTNEb3BlbiUzQmVuZFNpemUlM0Q4JTNCY3VydmVkJTNEMCUzQnJvdW5kZWQlM0QwJTNCZGFzaGVkJTNEMSUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjIxNjQlMjIlMjB5JTNEJTIyNDQwJTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMzQlMjIlMjB5JTNEJTIyNDQwJTIyJTIwYXMlM0QlMjJ0YXJnZXRQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14R2VvbWV0cnklM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlMjB2YWx1ZSUzRCUyMiUyMiUyMHN0eWxlJTNEJTIyZ3JvdXAlMjIlMjB2ZXJ0ZXglM0QlMjIxJTIyJTIwY29ubmVjdGFibGUlM0QlMjIwJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB4JTNEJTIyMTcwJTIyJTIweSUzRCUyMjEyMCUyMiUyMHdpZHRoJTNEJTIyMTEwJTIyJTIwaGVpZ2h0JTNEJTIyNTQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtNyUyMiUyMHN0eWxlJTNEJTIyZWRnZVN0eWxlJTNEb3J0aG9nb25hbEVkZ2VTdHlsZSUzQnJvdW5kZWQlM0QwJTNCb3J0aG9nb25hbExvb3AlM0QxJTNCamV0dHlTaXplJTNEYXV0byUzQmh0bWwlM0QxJTNCZXhpdFglM0QwLjUlM0JleGl0WSUzRDElM0JleGl0RHglM0QwJTNCZXhpdER5JTNEMCUzQmVudHJ5WCUzRDAuNSUzQmVudHJ5WSUzRDAlM0JlbnRyeUR4JTNEMCUzQmVudHJ5RHklM0QwJTNCZW5kQXJyb3clM0RibG9jayUzQmVuZEZpbGwlM0QwJTNCdmVydGljYWxBbGlnbiUzRGJvdHRvbSUzQmN1cnZlZCUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlMjBzb3VyY2UlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi04JTIyJTIwdGFyZ2V0JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtOSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi04JTIyJTIwdmFsdWUlM0QlMjJDVi1QZXJjZXB0aW9uJTIyJTIwc3R5bGUlM0QlMjJyb3VuZGVkJTNEMCUzQndoaXRlU3BhY2UlM0R3cmFwJTNCaHRtbCUzRDElM0JmaWxsQ29sb3IlM0QlMjNmZmU2Y2MlM0JzdHJva2VDb2xvciUzRCUyM2Q3OWIwMCUzQiUyMiUyMHZlcnRleCUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi02JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHdpZHRoJTNEJTIyMTEwJTIyJTIwaGVpZ2h0JTNEJTIyNDAlMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi05JTIyJTIwdmFsdWUlM0QlMjJDVi1QZXJjZXB0aW9uJTIyJTIwc3R5bGUlM0QlMjJyb3VuZGVkJTNEMCUzQndoaXRlU3BhY2UlM0R3cmFwJTNCaHRtbCUzRDElM0JmaWxsQ29sb3IlM0QlMjNmZmU2Y2MlM0JzdHJva2VDb2xvciUzRCUyM2Q3OWIwMCUzQiUyMiUyMHZlcnRleCUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi02JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHklM0QlMjI1MDAlMjIlMjB3aWR0aCUzRCUyMjExMCUyMiUyMGhlaWdodCUzRCUyMjQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMTIlMjIlMjB2YWx1ZSUzRCUyMjIlRUYlQkMlOUElRTUlOEYlODIlRTYlOTUlQjAlRTYlQTAlQTElRTklQUElOEMlMjIlMjBzdHlsZSUzRCUyMmh0bWwlM0QxJTNCYWxpZ24lM0RsZWZ0JTNCc3BhY2luZ0xlZnQlM0QyJTNCZW5kQXJyb3clM0RibG9jayUzQnJvdW5kZWQlM0QwJTNCZWRnZVN0eWxlJTNEb3J0aG9nb25hbEVkZ2VTdHlsZSUzQmN1cnZlZCUzRDAlM0Jyb3VuZGVkJTNEMCUzQmZvbnRTaXplJTNEMTIlM0JzdGFydFNpemUlM0Q4JTNCZW5kU2l6ZSUzRDglM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyNTUlMjIlMjB5JTNEJTIyMTAwJTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ0FycmF5JTIwYXMlM0QlMjJwb2ludHMlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjg1JTIyJTIweSUzRCUyMjEzMCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRkFycmF5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjI1NSUyMiUyMHklM0QlMjIxMzAlMjIlMjBhcyUzRCUyMnRhcmdldFBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhHZW9tZXRyeSUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMzIlMjIlMjB2YWx1ZSUzRCUyMjMlRUYlQkMlOUElRTUlODYlOTklRTUlODUlQTUlRTYlOTUlQjAlRTYlOEQlQUUlRTUlQkElOTNzdXJ2ZWlsbGFuY2UlRTglQTElQTglMjIlMjBzdHlsZSUzRCUyMmh0bWwlM0QxJTNCdmVydGljYWxBbGlnbiUzRGJvdHRvbSUzQmVuZEFycm93JTNEYmxvY2slM0JjdXJ2ZWQlM0QwJTNCcm91bmRlZCUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwd2lkdGglM0QlMjI4MCUyMiUyMHJlbGF0aXZlJTNEJTIyMSUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjYwJTIyJTIweSUzRCUyMjE5MCUyMiUyMGFzJTNEJTIyc291cmNlUG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjIxMCUyMiUyMHklM0QlMjIxOTAlMjIlMjBhcyUzRCUyMnRhcmdldFBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhHZW9tZXRyeSUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMzMlMjIlMjB2YWx1ZSUzRCUyMnJldHVybiUyMHN1cnZlaWxsYW5jZUlEJTIyJTIwc3R5bGUlM0QlMjJodG1sJTNEMSUzQnZlcnRpY2FsQWxpZ24lM0Rib3R0b20lM0JlbmRBcnJvdyUzRG9wZW4lM0JkYXNoZWQlM0QxJTNCZW5kU2l6ZSUzRDglM0JjdXJ2ZWQlM0QwJTNCcm91bmRlZCUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMjEwJTIyJTIweSUzRCUyMjIyMCUyMiUyMGFzJTNEJTIyc291cmNlUG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjYwJTIyJTIweSUzRCUyMjIyMCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0zNCUyMiUyMHZhbHVlJTNEJTIyNCVFRiVCQyU5QSVFNyVCQiU4NCVFOCVBMyU4NSVFNSVCOCU4MyVFNiU4RSVBNyVFOCVCNyVBRiVFNyU5NCVCMSVFNSU4RiU4MiVFNiU5NSVCMFJlcXVlc3QlMjIlMjBzdHlsZSUzRCUyMmh0bWwlM0QxJTNCYWxpZ24lM0RsZWZ0JTNCc3BhY2luZ0xlZnQlM0QyJTNCZW5kQXJyb3clM0RibG9jayUzQnJvdW5kZWQlM0QwJTNCZWRnZVN0eWxlJTNEb3J0aG9nb25hbEVkZ2VTdHlsZSUzQmN1cnZlZCUzRDAlM0Jyb3VuZGVkJTNEMCUzQmZvbnRTaXplJTNEMTIlM0JzdGFydFNpemUlM0Q4JTNCZW5kU2l6ZSUzRDglM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyNjAlMjIlMjB5JTNEJTIyMjU1JTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ0FycmF5JTIwYXMlM0QlMjJwb2ludHMlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjkwJTIyJTIweSUzRCUyMjI4NSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRkFycmF5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjI2MCUyMiUyMHklM0QlMjIyODUlMjIlMjBhcyUzRCUyMnRhcmdldFBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhHZW9tZXRyeSUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMzUlMjIlMjB2YWx1ZSUzRCUyMiVFNSVCOCU4MyVFNiU4RSVBNyVFOCVCNyVBRiVFNyU5NCVCMSVFOCVBRiVCNyVFNiVCMSU4MiUyMiUyMHN0eWxlJTNEJTIyaHRtbCUzRDElM0J2ZXJ0aWNhbEFsaWduJTNEYm90dG9tJTNCZW5kQXJyb3clM0RibG9jayUzQmN1cnZlZCUzRDAlM0Jyb3VuZGVkJTNEMCUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtNiUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB3aWR0aCUzRCUyMjgwJTIyJTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyNjAlMjIlMjB5JTNEJTIyMzUwJTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMzUwJTIyJTIweSUzRCUyMjM1MCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0zNiUyMiUyMHZhbHVlJTNEJTIycmV0dXJuJTIyJTIwc3R5bGUlM0QlMjJodG1sJTNEMSUzQnZlcnRpY2FsQWxpZ24lM0Rib3R0b20lM0JlbmRBcnJvdyUzRG9wZW4lM0JkYXNoZWQlM0QxJTNCZW5kU2l6ZSUzRDglM0JjdXJ2ZWQlM0QwJTNCcm91bmRlZCUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTYlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMzUwJTIyJTIweSUzRCUyMjM5MCUyMiUyMGFzJTNEJTIyc291cmNlUG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjUwJTIyJTIweSUzRCUyMjM5MCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0xNiUyMiUyMHZhbHVlJTNEJTIyJTIyJTIwc3R5bGUlM0QlMjJncm91cCUyMiUyMHZlcnRleCUzRCUyMjElMjIlMjBjb25uZWN0YWJsZSUzRCUyMjAlMjIlMjBwYXJlbnQlM0QlMjIxJTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHglM0QlMjIzNDAlMjIlMjB5JTNEJTIyMTIwJTIyJTIwd2lkdGglM0QlMjI4MCUyMiUyMGhlaWdodCUzRCUyMjU0MCUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTE3JTIyJTIwc3R5bGUlM0QlMjJlZGdlU3R5bGUlM0RvcnRob2dvbmFsRWRnZVN0eWxlJTNCcm91bmRlZCUzRDAlM0JvcnRob2dvbmFsTG9vcCUzRDElM0JqZXR0eVNpemUlM0RhdXRvJTNCaHRtbCUzRDElM0JleGl0WCUzRDAuNSUzQmV4aXRZJTNEMSUzQmV4aXREeCUzRDAlM0JleGl0RHklM0QwJTNCZW50cnlYJTNEMC41JTNCZW50cnlZJTNEMCUzQmVudHJ5RHglM0QwJTNCZW50cnlEeSUzRDAlM0JlbmRBcnJvdyUzRG5vbmUlM0JlbmRGaWxsJTNEMCUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMTYlMjIlMjBzb3VyY2UlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0xOCUyMiUyMHRhcmdldCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTE5JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHJlbGF0aXZlJTNEJTIyMSUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTE4JTIyJTIwdmFsdWUlM0QlMjJNeVNRTCUyMiUyMHN0eWxlJTNEJTIycm91bmRlZCUzRDAlM0J3aGl0ZVNwYWNlJTNEd3JhcCUzQmh0bWwlM0QxJTNCZmlsbENvbG9yJTNEJTIzZGFlOGZjJTNCc3Ryb2tlQ29sb3IlM0QlMjM2YzhlYmYlM0IlMjIlMjB2ZXJ0ZXglM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMTYlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwd2lkdGglM0QlMjI4MCUyMiUyMGhlaWdodCUzRCUyMjQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMTklMjIlMjB2YWx1ZSUzRCUyMk15U1FMJTIyJTIwc3R5bGUlM0QlMjJyb3VuZGVkJTNEMCUzQndoaXRlU3BhY2UlM0R3cmFwJTNCaHRtbCUzRDElM0JmaWxsQ29sb3IlM0QlMjNkYWU4ZmMlM0JzdHJva2VDb2xvciUzRCUyMzZjOGViZiUzQiUyMiUyMHZlcnRleCUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0xNiUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB5JTNEJTIyNTAwJTIyJTIwd2lkdGglM0QlMjI4MCUyMiUyMGhlaWdodCUzRCUyMjQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMjAlMjIlMjB2YWx1ZSUzRCUyMiUyMiUyMHN0eWxlJTNEJTIyZ3JvdXAlMjIlMjB2ZXJ0ZXglM0QlMjIxJTIyJTIwY29ubmVjdGFibGUlM0QlMjIwJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB4JTNEJTIyNDgwJTIyJTIweSUzRCUyMjEyMCUyMiUyMHdpZHRoJTNEJTIyODAlMjIlMjBoZWlnaHQlM0QlMjI1NDAlMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0yMSUyMiUyMHN0eWxlJTNEJTIyZWRnZVN0eWxlJTNEb3J0aG9nb25hbEVkZ2VTdHlsZSUzQnJvdW5kZWQlM0QwJTNCb3J0aG9nb25hbExvb3AlM0QxJTNCamV0dHlTaXplJTNEYXV0byUzQmh0bWwlM0QxJTNCZXhpdFglM0QwLjUlM0JleGl0WSUzRDElM0JleGl0RHglM0QwJTNCZXhpdER5JTNEMCUzQmVudHJ5WCUzRDAuNSUzQmVudHJ5WSUzRDAlM0JlbnRyeUR4JTNEMCUzQmVudHJ5RHklM0QwJTNCZW5kQXJyb3clM0Rub25lJTNCZW5kRmlsbCUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTIwJTIyJTIwc291cmNlJTNEJTIyZE94dkMzOXZuNWQyM05LMU05WnYtMjIlMjIlMjB0YXJnZXQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0yMyUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJkT3h2QzM5dm41ZDIzTksxTTladi0yMiUyMiUyMHZhbHVlJTNEJTIyRVglMjIlMjBzdHlsZSUzRCUyMnJvdW5kZWQlM0QwJTNCd2hpdGVTcGFjZSUzRHdyYXAlM0JodG1sJTNEMSUzQmZpbGxDb2xvciUzRCUyM2ZmZjJjYyUzQnN0cm9rZUNvbG9yJTNEJTIzZDZiNjU2JTNCJTIyJTIwdmVydGV4JTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMmRPeHZDMzl2bjVkMjNOSzFNOVp2LTIwJTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHdpZHRoJTNEJTIyODAlMjIlMjBoZWlnaHQlM0QlMjI0MCUyMiUyMGFzJTNEJTIyZ2VvbWV0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)

##### 1.2. 流程图

![添加人脸布控管理-流程图.drawio](C:\Users\485322\Downloads\添加人脸布控管理-流程图.drawio.png)

##### 1.3. 流程描述

1. SaaS下发添加布控任务请求；

2. 参数校验，若参数校验不通过，返回异常；

3. 判断库是否存在；

4. 若库不存在，返回异常；

5. 若库存在，判断库是否为静态库；

6. 若为静态库，返回异常；

7. 若不为静态库，根据库id与通道id是查询是否已存在布控；

8. 若布控已存在，则直接返回布控id；

9. 若不存在，将布控记录写入SURVEILLANCE表；

10. Rpc调用Excutor添加布控规则；

11. 若Rpc调用失败，则回滚SURVEILLANCE表记录，若Rpc调用成功，则返回布控id。



